<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Baichuan ZENG - Portfolio</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    :root {
      --primary-color: #2c3e50; /* Dark Blue/Grey */
      --secondary-color: #3498db; /* Bright Blue */
      --text-color: #333;
      --light-grey: #f4f6f8; /* Slightly lighter for sidebar background */
      --border-color: #ddd;
      --background-color: #e9ecef; /* Main page background */
      --white-color: #fff;
      --link-color: #2980b9;
      --hover-link-color: #1abc9c; /* Teal for hover */

      --sidebar-width-desktop: 320px;
      --transition-speed: 0.4s;
      --card-shadow: 0 2px 4px rgba(0,0,0,0.05);
      --card-shadow-hover: 0 4px 8px rgba(0,0,0,0.1);
    }

    html {
      scroll-behavior: smooth;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Lato', Arial, sans-serif;
      line-height: 1.7;
      background-color: var(--background-color);
      color: var(--text-color);
      font-size: 16px;
    }

    .page-wrapper {
      display: flex;
      min-height: 100vh;
    }

    /* --- Sidebar --- */
    .sidebar {
      width: var(--sidebar-width-desktop);
      position: fixed; /* Fixed position */
      left: 0;
      top: 0;
      bottom: 0; /* Makes it full height */
      background-color: var(--light-grey);
      padding: 30px 25px;
      display: flex;
      flex-direction: column;
      align-items: center; /* Center items horizontally */
      text-align: center; /* Center text */
      overflow-y: auto; /* Scroll if sidebar content is too tall */
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      z-index: 100;
    }

    .sidebar .logo img {
      max-width: 150px; /* Adjust as needed */
      height: auto;
      margin-bottom: 25px;
    }

    .profile-photo {
      width: 220px; /* Larger photo width */
      height: auto; /* Maintain aspect ratio, or set a fixed height for specific rectangle */
      /* height: 280px; /* Example fixed height for a more portrait rectangle */
      border-radius: 8px; /* Rectangular with slightly rounded corners, set to 0 for sharp */
      object-fit: cover;
      border: 4px solid var(--white-color); /* White border to lift it */
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      margin-bottom: 20px;
    }

    .sidebar h1 {
      font-family: 'Roboto', sans-serif;
      font-size: 26px; /* Adjusted for sidebar */
      font-weight: 500;
      color: var(--primary-color);
      margin-top: 0;
      margin-bottom: 10px;
    }

    .sidebar .contact {
      font-size: 13px; /* Smaller for sidebar */
      color: #444; /* Slightly darker for readability */
      margin-bottom: 0;
      line-height: 1.6;
    }
    .sidebar .contact a {
      color: #444;
      text-decoration: none;
      display: block; /* Make each part of contact info on new line if needed */
      margin-bottom: 3px;
    }
    .sidebar .contact a:hover {
      color: var(--secondary-color);
      text-decoration: underline;
    }

    .social-links {
      margin-top: 20px;
      display: flex;
      gap: 20px;
      justify-content: center;
    }

    .social-links a {
      color: var(--primary-color);
      font-size: 20px;
      transition: all var(--transition-speed);
      opacity: 0.8;
    }

    .social-links a:hover {
      color: var(--secondary-color);
      opacity: 1;
      transform: translateY(-2px);
    }

    /* --- Main Content --- */
    .main-content {
      margin-left: var(--sidebar-width-desktop); /* Offset by sidebar width */
      flex-grow: 1; /* Takes remaining space */
      padding: 40px;
      background-color: var(--white-color);
      min-height: 100vh; /* Ensure it can fill screen if content is short */
      box-shadow: -3px 0 10px rgba(0,0,0,0.05); /* Subtle shadow from sidebar */
    }

    /* --- Section Styling (within main-content) --- */
    h2 {
      font-family: 'Roboto', sans-serif;
      font-size: 28px;
      font-weight: 500;
      color: var(--primary-color);
      margin-top: 0;
      margin-bottom: 25px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--secondary-color);
      display: inline-block;
    }

    h3 {
      font-family: 'Roboto', sans-serif;
      font-size: 20px;
      font-weight: 500;
      color: var(--primary-color);
      margin-top: 20px;
      margin-bottom: 15px;
    }

    section {
      margin-bottom: 40px;
      padding-bottom: 25px;
    }
    section:not(:last-child) {
        border-bottom: 1px solid var(--border-color);
    }

    ul {
      padding-left: 25px;
      list-style-type: none;
      margin-bottom: 15px;
    }

    li {
      margin-bottom: 12px;
      position: relative;
      padding-left: 20px;
    }

    li::before {
      content: "•";
      color: var(--secondary-color);
      position: absolute;
      left: 0;
      font-weight: bold;
    }

    .subsection {
      margin-bottom: 25px;
      padding-left: 15px;
      border-left: 1px solid var(--border-color);
    }
    .subsection strong {
        font-weight: 500;
    }
    .subsection strong a {
        font-weight: 500;
    }

    a {
      color: var(--link-color);
      text-decoration: none;
      transition: color 0.2s ease-in-out;
    }

    a:hover, a:focus {
      color: var(--hover-link-color);
      text-decoration: underline;
    }

    p {
        margin-bottom: 15px;
    }

    /* --- Responsive Design --- */
    @media (max-width: 992px) { /* Tablet and below - sidebar becomes static top bar */
      .page-wrapper {
        flex-direction: column; /* Stack sidebar (now header) and main content */
      }

      .sidebar {
        position: static; /* No longer fixed */
        width: 100%;
        height: auto; /* Auto height */
        bottom: auto; /* Reset bottom */
        flex-direction: column; /* Keep items stacked */
        align-items: center; /* Center items */
        padding: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Bottom shadow */
        z-index: auto;
      }

      .sidebar .logo img {
        max-width: 120px;
        margin-bottom: 15px;
      }

      .profile-photo {
        width: 150px; /* Adjust for mobile header */
        /* height: 180px; */ /* Example */
        margin-bottom: 15px;
      }

      .sidebar h1 {
        font-size: 22px;
        margin-bottom: 8px;
      }
      .sidebar .contact {
        font-size: 12px;
        display: flex; /* Try to keep contact info more compact */
        flex-wrap: wrap;
        justify-content: center;
      }
      .sidebar .contact a {
        margin: 0 5px; /* Space out contact links if they are side-by-side */
        display: inline;
      }


      .main-content {
        margin-left: 0; /* No offset needed */
        padding: 25px;
        box-shadow: none;
      }

      h2 {
        font-size: 24px;
      }
      h3 {
        font-size: 18px;
      }
    }

    @media (max-width: 480px) { /* Smaller mobile devices */
      body {
        font-size: 15px;
      }
      .main-content {
        padding: 20px 15px;
      }
      .sidebar {
        padding: 15px;
      }
      .profile-photo {
        width: 120px;
      }
      .sidebar h1 {
        font-size: 20px;
      }
       .sidebar .contact {
        flex-direction: column; /* Stack contact details fully on very small screens */
      }
      .sidebar .contact a {
        margin-bottom: 5px;
      }

      h2 {
        font-size: 22px;
        text-align: center;
        display: block;
      }
    }

    /* Back to Top Button */
    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background-color: var(--primary-color);
      color: white;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      opacity: 0;
      transition: all var(--transition-speed);
      z-index: 1000;
      cursor: pointer;
      box-shadow: var(--card-shadow);
    }

    .back-to-top.visible {
      opacity: 0.8;
    }

    .back-to-top:hover {
      opacity: 1;
      transform: translateY(-3px);
      box-shadow: var(--card-shadow-hover);
    }

    /* Section Cards */
    .section-card {
      background: var(--white-color);
      border-radius: 4px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: var(--card-shadow);
      transition: box-shadow var(--transition-speed);
      border: 1px solid var(--border-color);
    }

    .section-card:hover {
      box-shadow: var(--card-shadow-hover);
    }

    /* Publication Item */
    .publication-item {
      padding: 20px;
      border-left: 2px solid var(--secondary-color);
      margin-bottom: 20px;
      transition: transform var(--transition-speed);
      background-color: var(--light-grey);
    }

    .publication-item:hover {
      transform: translateX(5px);
    }

    /* CV Download Button */
    .cv-button {
      display: inline-block;
      padding: 10px 20px;
      background-color: var(--secondary-color);
      color: white;
      text-decoration: none;
      border-radius: 5px;
      transition: background-color var(--transition-speed), transform var(--transition-speed);
      margin-top: 10px;
    }

    .cv-button:hover {
      background-color: var(--hover-link-color);
      transform: translateY(-2px);
    }

    /* Navigation Bar */
    .nav-bar {
      position: fixed;
      top: 0;
      left: var(--sidebar-width-desktop);
      right: 0;
      background-color: var(--white-color);
      padding: 15px 40px;
      display: flex;
      gap: 30px;
      box-shadow: var(--card-shadow);
      z-index: 100;
      border-bottom: 1px solid var(--border-color);
    }

    .nav-link {
      color: var(--primary-color);
      text-decoration: none;
      padding: 5px 0;
      position: relative;
      font-weight: 500;
      transition: color var(--transition-speed);
    }

    .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 0;
      background-color: var(--secondary-color);
      transition: width var(--transition-speed);
    }

    .nav-link:hover::after {
      width: 100%;
    }

    .nav-link.active {
      color: var(--secondary-color);
    }

    .nav-link.active::after {
      width: 100%;
    }

    /* Section Visibility */
    .section {
      display: none;
      opacity: 0;
      transition: opacity var(--transition-speed);
    }

    .section.active {
      display: block;
      opacity: 1;
    }

    /* Adjust main content for nav bar */
    .main-content {
      margin-top: 60px;
    }

    @media (max-width: 992px) {
      .nav-bar {
        left: 0;
        padding: 10px 20px;
      }
    }

    /* Map Styles */
    #Map {
      height: 500px;
      width: 100%;
      border-radius: 8px;
      margin-bottom: 25px;
      border: 1px solid var(--border-color);
      box-shadow: var(--card-shadow);
    }

    .map-container {
      position: relative;
      overflow: hidden;
    }

    .city-info {
      padding: 25px;
      background: var(--white-color);
      border-radius: 8px;
      box-shadow: var(--card-shadow);
      margin-top: 25px;
      display: none;
      border: 1px solid var(--border-color);
    }

    .city-info.active {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }

    .city-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .city-header h3 {
      margin: 0;
      color: var(--primary-color);
    }

    .city-date {
      color: var(--secondary-color);
      font-size: 0.9em;
    }

    .city-time {
      font-size: 1.2em;
      color: var(--primary-color);
      margin: 10px 0;
      font-weight: 500;
    }

    .city-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .city-gallery img {
      width: 100%;
      height: auto;
      object-fit: cover;
      border-radius: 8px;
      transition: all var(--transition-speed);
      cursor: pointer;
      box-shadow: var(--card-shadow);
    }

    .city-gallery img:hover {
      transform: scale(1.03);
      box-shadow: var(--card-shadow-hover);
    }

    .map-popup {
      font-family: 'Roboto', sans-serif;
      padding: 10px;
    }

    .map-popup h3 {
      margin: 0 0 5px 0;
      color: var(--primary-color);
      font-size: 16px;
    }

    .map-popup p {
      margin: 0;
      color: var(--text-color);
      font-size: 14px;
    }

    .map-popup .city-time {
      font-size: 14px;
      margin: 5px 0;
    }

    .custom-popup .leaflet-popup-content-wrapper {
      background: var(--white-color);
      border-radius: 8px;
      box-shadow: var(--card-shadow);
    }

    .custom-popup .leaflet-popup-tip {
      background: var(--white-color);
    }

    .custom-marker {
      background: var(--secondary-color);
      border: 2px solid white;
      border-radius: 50%;
      box-shadow: var(--card-shadow);
    }

    .terminator {
      fill: rgba(0, 0, 0, 0.4);
      stroke: rgba(0, 0, 0, 0.5);
      stroke-width: 1.5;
      transition: fill 0.5s ease-in-out;
    }

    .twilight {
      fill: rgba(0, 0, 0, 0.2);
      transition: fill 0.5s ease-in-out;
    }

    .terminator-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Photo Modal Styles */
    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 2000; /* Sit on top */
      padding-top: 60px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
    }

    .modal-content {
      margin: auto;
      display: block;
      max-width: 90%;
      max-height: 80%; /* Adjust based on padding-top */
    }

    #caption {
      margin: auto;
      display: block;
      width: 90%;
      max-width: 700px;
      text-align: center;
      color: #ccc;
      padding: 10px 0;
      height: 150px; /* Give some space for caption */
    }

    /* Add Animation */
    .modal-content, #caption {
      animation-name: zoom;
      animation-duration: 0.6s;
    }

    @keyframes zoom {
      from {transform: scale(0.1)} 
      to {transform: scale(1)}
    }

    /* 100% Image Width on Smaller Screens */
    @media only screen and (max-width: 700px){
      .modal-content {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <aside class="sidebar">
      <div class="logo">
        <a href="https://www.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">
          <img src="pictures/cuhk-logo.PNG" alt="CUHK Logo">
        </a>
      </div>
      <img src="pictures/me_dubai.jpg" alt="Baichuan ZENG" class="profile-photo">
      <h1>TSANG Baak Cyun(曾百川), Nokk</h1>
      <div class="contact">
        <a href="javascript:void(0)" onclick="copyPhoneNumber()" id="phoneLink">Tel: +852-68502154</a>
        <a href="javascript:void(0)" onclick="copyEmail('baichuan@link.cuhk.edu.hk', 'schoolEmailLink')" id="schoolEmailLink">School: baichuan@link.cuhk.edu.hk</a>
        <a href="javascript:void(0)" onclick="copyEmail('zbc2385505079@gmail.com', 'privateEmailLink')" id="privateEmailLink">Personal: zbc2385505079@gmail.com</a>
        <div class="social-links">
          <a href="https://github.com/NokkTsang" target="_blank" rel="noopener noreferrer" title="GitHub"><i class="fab fa-github"></i></a>
          <a href="https://www.linkedin.com/in/nokk-tsang-zbc68502154/" target="_blank" rel="noopener noreferrer" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.instagram.com/zzeb_n/" target="_blank" rel="noopener noreferrer" title="Instagram"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </aside>

    <nav class="nav-bar">
      <a href="#home" class="nav-link active" data-section="home">Home</a>
      <a href="#publications" class="nav-link" data-section="publications">Publications</a>
      <a href="#cv" class="nav-link" data-section="cv">CV</a>
      <a href="#tours" class="nav-link" data-section="tours">Tours</a>
    </nav>

    <main class="main-content">
      <section id="home" class="section active">
        <div class="section-card">
          <h2>General Introduction</h2>
          <p>
            As a penultimate UG student passionate about AI agents and 3D Vision, I am currently involved in two key projects: Machine Learning for Molecular Prediction: training models to predict inhibitors of Tdp1, contributing to drug discovery with members from the Faculty of Medicine of CUHK; Computer Vision for Spatial Understanding: the final year project under <a href="https://www.cse.cuhk.edu.hk/~cwfu/" target="_blank" rel="noopener noreferrer">Prof. Chi-Wing FU, Philip</a>, focusing on mixed reality for surgical navigation and training. I am particularly interested in how intelligent agents can be integrated into the exploration of the physical and digital world.
          </p>
        </div>

        <div class="section-card">
          <h2>Education</h2>
          <div class="subsection">
            <h3><a href="https://www.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">The Chinese University of Hong Kong</a>, Hong Kong SAR</h3>
            <p>
              B.Sc. in Computer Science (2022/09–2026/07) [Anticipated]<br/>
              - Area of interest: AI, ML, Computer Vision, Robotics, Mixed Reality, Embodied Intelligence<br/>
              - College: <a href="https://www.shho.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">S.H. HO College</a> | Advisor: <a href="https://www.cse.cuhk.edu.hk/~taoyf/" target="_blank" rel="noopener noreferrer">Prof. Yu-Fei TAO</a>
            </p>
          </div>
          <div class="subsection">
            <h3><a href="https://www.uni-heidelberg.de/de" target="_blank" rel="noopener noreferrer">Heidelberg University</a>, Heidelberg, Germany</h3>
            <p>International Summer School (2025/08)</p>
          </div>
          <div class="subsection">
            <h3><a href="https://www.heungto.edu.hk/" target="_blank" rel="noopener noreferrer">Heung To Middle School</a>, Hong Kong SAR</h3>
            <p>Secondary Education (2018/09–2022/07)</p>
          </div>
        </div>

        <div class="section-card">
          <h2>Academic Achievements</h2>
          <ul>
            <li><strong>ELITE Stream Student</strong>, Faculty of Engineering, CUHK (2022/09–2024/12)</li>
            <li><strong>Best Performance, Individual Winner</strong>, Hong Kong Mathematics Olympiad (2021/07): Full-mark in Paper Two</li>
            <li><strong>Third Honor Award</strong>, Hong Kong Physics Olympiad (2020/08)</li>
          </ul>
        </div>

        <div class="section-card">
          <h2>Research Experience</h2>
          <div class="subsection">
            <h3>Participant, Online Program in Computer Vision in Robotics</h3>
            <p>
              - Advised by <a href="https://guangmingw.github.io/" target="_blank" rel="noopener noreferrer">Dr. Guangming Wang</a>, University of Cambridge<br/>
              - Completed a review paper: <a href="https://arxiv.org/abs/2504.15970" target="_blank" rel="noopener noreferrer">Recent Advances and Future Directions in Extended Reality (XR): Exploring AI-Powered Spatial Intelligence</a> as the project
            </p>
          </div>
          <div class="subsection">
            <h3>Summer Research, <a href="https://en.sjtu.edu.cn/" target="_blank" rel="noopener noreferrer">Shanghai Jiao Tong University</a> (2023/07–2023/08)</h3>
            <p>
              - Advised by <a href="https://soo.sjtu.edu.cn/en/teacher-list/zengzheng.html" target="_blank" rel="noopener noreferrer">Prof. Zheng Zeng</a><br/>
              - Worked on Morphing Hybrid Aerial-Underwater vehicle<br/>
              - Conducted outdoor experiments, data analysis, and contributed to paper writing
            </p>
          </div>
        </div>

        <div class="section-card">
          <h2>Technical Skills</h2>
          <ul>
            <li>Programming: C/C++, Java, Python, SQL, HTML, JavaScript</li>
            <li>Tools: PyTorch, OpenCV, ROS, Blender</li>
            <li>Algorithm Design, Database Admin, Project Management, Model Training, Software Development, Technical Writing, 3D Modeling</li>
          </ul>
        </div>

        <div class="section-card">
          <h2>Language Proficiency</h2>
          <ul>
            <li>English</li>
            <li>Mandarin</li>
            <li>Cantonese</li>
            <li>German</li>
          </ul>
        </div>

        <div class="section-card">
          <h2>Related Courses</h2>
          <ul>
            <li>Data Structures</li>
            <li>Computer Organization & Design</li>
            <li>Intro to Operating Systems</li>
            <li>Intro to Database Systems</li>
            <li>Design & Analysis of Algorithms</li>
            <li>Formal Languages & Automata Theory</li>
            <li>Fundamentals of Machine Learning</li>
            <li>Software Engineering</li>
          </ul>
        </div>

        <div class="section-card">
          <h2>Extra-Curricular Activities</h2>
          <ul>
            <li>Exhibitor, Dental South China International Expo, Guangzhou (2024/03)</li>
            <li>Member, SHHO College Table Tennis Team (2023/09–Current)</li>
            <li>Member, SHHO College Basketball Team (2022/07–2024/06)</li>
          </ul>
        </div>
      </section>

      <section id="publications" class="section">
        <div class="section-card">
          <h2>Publications</h2>
          <div class="publication-item">
            <h3>Cognitive UAV Tracking: Leveraging DRL and Hybrid Curriculum Learning for Target Reacquisition</h3>
            <p>IEEE Transactions on Automation Science and Engineering (TASE)</p>
            <p>Accepted: June 2025 | <strong>Second Author</strong></p>
          </div>
          <div class="publication-item">
            <h3>Nezha-MB: Design and Implementation of a Morphing Hybrid Aerial-Underwater Vehicle</h3>
            <p>IEEE International Conference on Robotics and Automation (ICRA 2025)</p>
            <p>Accepted: January 2025 | <strong>Third Author</strong></p>
          </div>
        </div>
      </section>

      <section id="cv" class="section">
        <div class="section-card">
          <h2>Curriculum Vitae</h2>
          <p>My detailed CV is currently in progress. Please check back later for updates.</p>
          <a href="#" class="cv-button">Download CV (Coming Soon)</a>
        </div>
      </section>

      <section id="tours" class="section">
        <div class="section-card">
          <h2>Global Footprint</h2>
          <div class="map-container">
            <div id="Map"></div>
          </div>
          
          <!-- ===== North America ===== -->

          <!-- Los Angeles -->
          <div id="losAngeles" class="city-info">
            <div class="city-header">
              <h3>Los Angeles</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="losAngeles-gallery"></div>
          </div>

          <!-- San Francisco -->
          <div id="sanFrancisco" class="city-info">
            <div class="city-header">
              <h3>San Francisco</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="sanFrancisco-gallery"></div>
          </div>

          <!-- New York -->
          <div id="newYork" class="city-info">
            <div class="city-header">
              <h3>New York City</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="newYork-gallery"></div>
          </div>

          <!-- Atlanta -->
          <div id="atlanta" class="city-info">
            <div class="city-header">
              <h3>Atlanta</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="atlanta-gallery"></div>
          </div>


          <!-- ===== Europe ===== -->

          <!-- Stuttgart -->
          <div id="stuttgart" class="city-info">
            <div class="city-header">
              <h3>Stuttgart</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="stuttgart-gallery"></div>
          </div>

          <!-- Amsterdam -->
          <div id="amsterdam" class="city-info">
            <div class="city-header">
              <h3>Amsterdam</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="amsterdam-gallery"></div>
          </div>

          <!-- Cologne -->
          <div id="cologne" class="city-info">
            <div class="city-header">
              <h3>Cologne</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="cologne-gallery"></div>
          </div>

          <!-- Düsseldorf -->
          <div id="dusseldorf" class="city-info">
            <div class="city-header">
              <h3>Düsseldorf</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="dusseldorf-gallery"></div>
          </div>


          <!-- ===== East Asia ===== -->

          <!-- Tokyo -->
          <div id="tokyo" class="city-info">
            <div class="city-header">
              <h3>Tokyo</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="tokyo-gallery"></div>
          </div>

          <!-- Osaka -->
          <div id="osaka" class="city-info">
            <div class="city-header">
              <h3>Osaka</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="osaka-gallery"></div>
          </div>


          <!-- ===== West Asia ===== -->

          <!-- Dubai -->
          <div id="dubai" class="city-info">
            <div class="city-header">
              <h3>Dubai</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="dubai-gallery"></div>
          </div>


          <!-- ===== China ===== -->

          <!-- Shanghai -->
          <div id="shanghai" class="city-info">
            <div class="city-header">
              <h3>Shanghai</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="shanghai-gallery"></div>
          </div>

          <!-- Shenzhen -->
          <div id="shenzhen" class="city-info">
            <div class="city-header">
              <h3>Shenzhen</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="shenzhen-gallery"></div>
          </div>

          <!-- Taipei -->
          <div id="taipei" class="city-info">
            <div class="city-header">
              <h3>Taipei</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="taipei-gallery"></div>
          </div>

          <!-- Macau -->
          <div id="macau" class="city-info">
            <div class="city-header">
              <h3>Macau</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="macau-gallery"></div>
          </div>

          <!-- Chongqing -->
          <div id="chongqing" class="city-info">
            <div class="city-header">
              <h3>Chongqing</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="chongqing-gallery"></div>
          </div>

          <!-- Changsha -->
          <div id="changsha" class="city-info">
            <div class="city-header">
              <h3>Changsha</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="changsha-gallery"></div>
          </div>

          <!-- Xiamen -->
          <div id="xiamen" class="city-info">
            <div class="city-header">
              <h3>Xiamen</h3>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="xiamen-gallery"></div>
          </div>


          <!-- ===== Current Base ===== -->
           
          <!-- Hong Kong -->
          <div id="hongKong" class="city-info">
            <div class="city-header">
              <h3>Hong Kong</h3>
              <span class="city-date">Current Base</span>
            </div>
            <p class="city-description"></p>
            <div class="city-gallery" id="hongKong-gallery"></div>
          </div>

        </div>
      </section>
    </main>
  </div>

  <a href="#" class="back-to-top" id="backToTop">
    <i class="fas fa-arrow-up"></i>
  </a>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Existing scripts...

    // Helper function to copy text to clipboard
    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch (err) {
        console.error('Failed to copy: ', err);
        return false;
      }
    }

    // Helper function to show a temporary notification
    function showCopyNotification(element, message) {
      const notification = document.createElement('span');
      notification.textContent = message;
      notification.style.cssText = `
        margin-left: 10px;
        color: green;
        font-size: 0.9em;
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
      `;
      element.parentNode.insertBefore(notification, element.nextSibling);

      setTimeout(() => {
        notification.style.opacity = 0;
        notification.addEventListener('transitionend', () => notification.remove());
      }, 2000); // Show for 2 seconds
    }

    // Function to copy phone number
    async function copyPhoneNumber() {
      const phoneLink = document.getElementById('phoneLink');
      if (!phoneLink) return;
      const phoneNumber = phoneLink.textContent.replace('Tel: ', '').trim();
      const success = await copyToClipboard(phoneNumber);
      if (success) {
        showCopyNotification(phoneLink, 'Copied!');
      }
    }

    // Function to copy email address
    async function copyEmail(email, linkId) {
      const emailLink = document.getElementById(linkId);
      if (!emailLink) return;
      const success = await copyToClipboard(email);
      if (success) {
        showCopyNotification(emailLink, 'Copied!');
      }
    }

    // Back to Top Button
    const backToTopButton = document.getElementById('backToTop');

    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        backToTopButton.classList.add('visible');
      } else {
        backToTopButton.classList.remove('visible');
      }
    });

    backToTopButton.addEventListener('click', (e) => {
      e.preventDefault();
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Smooth scroll for all anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth'
          });
        }
      });
    });

    // Section Navigation
    const sections = document.querySelectorAll('.section');
    const navLinks = document.querySelectorAll('.nav-link');

    function showSection(sectionId) {
      // Hide all sections
      sections.forEach(section => {
        section.classList.remove('active');
      });

      // Remove active class from all nav links
      navLinks.forEach(link => {
        link.classList.remove('active');
      });

      // Show selected section
      const selectedSection = document.getElementById(sectionId);
      if (selectedSection) {
        selectedSection.classList.add('active');
      }

      // Add active class to clicked nav link
      const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
      if (activeLink) {
        activeLink.classList.add('active');
      }
    }

    // Add click event listeners to nav links
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const sectionId = link.getAttribute('data-section');
        showSection(sectionId);
        
        // Update URL hash without scrolling
        history.pushState(null, null, `#${sectionId}`);
      });
    });

    // Handle initial page load
    window.addEventListener('load', () => {
      const hash = window.location.hash.slice(1) || 'home';
      showSection(hash);
    });

    // Handle browser back/forward buttons
    window.addEventListener('popstate', () => {
      const hash = window.location.hash.slice(1) || 'home';
      showSection(hash);
    });

    // Initialize map when tours section is shown
    let map;
    const cities = {
      // ===== North America =====
      losAngeles: { 
        lat: 34.0522, 
        lng: -118.2437, 
        name: "Los Angeles", 
        date: "2024",
        description: "The entertainment capital of the world.",
        timezone: "America/Los_Angeles",
        photos: [
          { src: "pictures/losangeles1.jpg", alt: "Los Angeles" }
          // Add more photos by adding new objects here
          // { src: "pictures/losangeles2.jpg", alt: "Los Angeles" }
        ]
      },
      sanFrancisco: { 
        lat: 37.7749, 
        lng: -122.4194, 
        name: "San Francisco", 
        date: "2024",
        description: "The tech hub of Silicon Valley.",
        timezone: "America/Los_Angeles",
        photos: [
          { src: "pictures/sanfrancisco1.jpg", alt: "San Francisco" }
        ]
      },
      newYork: { 
        lat: 40.7128, 
        lng: -74.0060, 
        name: "New York City", 
        date: "2024",
        description: "The city that never sleeps.",
        timezone: "America/New_York",
        photos: [
          { src: "pictures/newyork1.jpg", alt: "New York City" }
        ]
      },
      atlanta: { 
        lat: 33.7490, 
        lng: -84.3880, 
        name: "Atlanta", 
        date: "2024",
        description: "The capital of Georgia and a major business hub.",
        timezone: "America/New_York",
        photos: [
          { src: "pictures/atlanta1.jpg", alt: "Atlanta" }
        ]
      },

      // ===== Europe =====
      stuttgart: { 
        lat: 48.7758, 
        lng: 9.1829, 
        name: "Stuttgart", 
        date: "2024",
        description: "The automotive capital of Germany.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "pictures/stuttgart1.jpg", alt: "Stuttgart" }
        ]
      },
      amsterdam: { 
        lat: 52.3676, 
        lng: 4.9041, 
        name: "Amsterdam", 
        date: "2024",
        description: "The capital of the Netherlands.",
        timezone: "Europe/Amsterdam",
        photos: [
          { src: "pictures/amsterdam1.jpg", alt: "Amsterdam" }
        ]
      },
      cologne: { 
        lat: 50.9375, 
        lng: 6.9603, 
        name: "Cologne", 
        date: "2024",
        description: "A historic city on the Rhine River.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "pictures/cologne1.jpg", alt: "Cologne" }
        ]
      },
      dusseldorf: { 
        lat: 51.2277, 
        lng: 6.7735, 
        name: "Düsseldorf", 
        date: "2024",
        description: "A major business and fashion center.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "pictures/dusseldorf1.jpg", alt: "Düsseldorf" }
        ]
      },

      // ===== East Asia =====
      tokyo: { 
        lat: 35.6762, 
        lng: 139.6503, 
        name: "Tokyo", 
        date: "2024",
        description: "Japan's capital and largest city.",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "pictures/tokyo1.jpg", alt: "Tokyo" }
        ]
      },
      osaka: { 
        lat: 34.6937, 
        lng: 135.5023, 
        name: "Osaka", 
        date: "2024",
        description: "Japan's second-largest city.",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "pictures/osaka1.jpg", alt: "Osaka" }
        ]
      },

      // ===== West Asia =====
      dubai: { 
        lat: 25.2048, 
        lng: 55.2708, 
        name: "Dubai", 
        date: "2024",
        description: "A city of architectural wonders.",
        timezone: "Asia/Dubai",
        photos: [
          { src: "pictures/dubai1.jpg", alt: "Dubai" }
        ]
      },

      // ===== China =====
      shanghai: { 
        lat: 31.2304, 
        lng: 121.4737, 
        name: "Shanghai", 
        date: "2024",
        description: "China's largest city and financial center.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/shanghai1.jpg", alt: "Shanghai" }
        ]
      },
      taipei: { 
        lat: 25.0330, 
        lng: 121.5654, 
        name: "Taipei", 
        date: "2024",
        description: "The capital city of Taiwan.",
        timezone: "Asia/Taipei",
        photos: [
          { src: "pictures/taipei1.jpg", alt: "Taipei" }
        ]
      },
      macau: { 
        lat: 22.1987, 
        lng: 113.5439, 
        name: "Macau", 
        date: "2024",
        description: "Never gambling there before.",
        timezone: "Asia/Macau",
        photos: [
          { src: "pictures/macau1.jpg", alt: "Macau" }
        ]
      },
      shenzhen: { 
        lat: 22.5431, 
        lng: 114.0579, 
        name: "Shenzhen", 
        date: "2024",
        description: "A major tech and manufacturing hub.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/shenzhen1.jpg", alt: "Shenzhen" }
        ]
      },
      chongqing: { 
        lat: 29.4316, 
        lng: 106.9123, 
        name: "Chongqing", 
        date: "2024",
        description: "I like the hotpot there.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/chongqing1.jpg", alt: "Chongqing" }
        ]
      },
      changsha: { 
        lat: 28.1128, 
        lng: 112.9822, 
        name: "Changsha", 
        date: "2024",
        description: "My hometown!!!",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/changsha1.jpg", alt: "Changsha" }
        ]
      },
      xiamen: { 
        lat: 24.4798, 
        lng: 118.0822,
        name: "Xiamen", 
        date: "2024",
        description: "Comfortable and beautiful.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/xiamen1.jpg", alt: "Xiamen" }
        ]
      },

      // ===== Current Base =====
      hongKong: { 
        lat: 22.3193, 
        lng: 114.1694, 
        name: "Hong Kong", 
        date: "Current Base",
        description: "The vibrant city where I currently live and study, combining modern architecture with rich cultural heritage.",
        timezone: "Asia/Hong_Kong",
        photos: [
          { src: "pictures/hongkong1.jpg", alt: "Hong Kong" }
        ]
      }
    };

    // Function to update city times
    function updateCityTimes() {
      Object.entries(cities).forEach(([id, city]) => {
        const timeElement = document.getElementById(`${id}-time`);
        if (timeElement) {
          const time = new Date().toLocaleTimeString('en-US', {
            timeZone: city.timezone,
            hour12: true,
            hour: 'numeric',
            minute: '2-digit'
          });
          timeElement.textContent = `Current Time: ${time}`;
        }
      });
    }

    function initMap() {
      if (map) return;

      // Initialize map with custom options
      map = L.map('Map', {
        center: [0, 0],
        zoom: 2,
        zoomControl: false,
        scrollWheelZoom: true,
        minZoom: 1,
        maxZoom: 18,
        zoomSnap: 0.5,
        zoomDelta: 0.5,
        wheelDebounceTime: 40,
        wheelPxPerZoomLevel: 60,
        worldCopyJump: true,
        maxBounds: null,
        maxBoundsViscosity: 0
      });

      // Add your preferred tile layer here (no change)
      const dayLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '©OpenStreetMap, ©CartoDB',
        maxZoom: 19,
        noWrap: false,
        continuousWorld: true
      });
      dayLayer.addTo(map);

      // Add zoom control in bottom right with custom styling
      L.control.zoom({
        position: 'bottomright',
        zoomInText: '<i class="fas fa-plus"></i>',
        zoomOutText: '<i class="fas fa-minus"></i>'
      }).addTo(map);

      // --- Add city markers and popups (ensure this runs after terminator) ---
      Object.entries(cities).forEach(([id, city]) => {
        const marker = L.circleMarker([city.lat, city.lng], {
          radius: 8,
          fillColor: getComputedStyle(document.documentElement).getPropertyValue('--secondary-color').trim() || '#3498db',
          color: '#fff',
          weight: 2,
          opacity: 1,
          fillOpacity: 0.8
        }).addTo(map); // Do NOT specify a pane here

        marker.bindPopup(`
          <div class="map-popup">
            <h3>${city.name}</h3>
            <p>Last visited: ${city.date}</p>
            <div class="city-time">Current Time: ${new Date().toLocaleTimeString('en-US', {
              timeZone: city.timezone,
              hour12: true,
              hour: 'numeric',
              minute: '2-digit'
            })}</div>
          </div>
        `, {
          className: 'custom-popup',
          closeButton: false,
          offset: [0, -10]
        });

        // Optional: Add hover effect
        marker.on('mouseover', function() {
          this.setStyle({
            radius: 10,
            fillOpacity: 1
          });
        });
        marker.on('mouseout', function() {
          this.setStyle({
            radius: 8,
            fillOpacity: 0.8
          });
        });

        // Optional: Store marker for later use (e.g., updating popup time)
        if (!map.markers) map.markers = {};
        map.markers[id] = marker;

        // Add click event to show city info section and fly to location
        marker.on('click', () => {
          showCityInfo(id);
          // Optional: Smooth zoom animation on click
          map.flyTo([city.lat, city.lng], Math.max(map.getZoom(), 10), {
            duration: 1.5,
            easeLinearity: 0.25,
            maxZoom: 18
          });
        });
      });
      // --- End marker code ---

      // Add double click zoom handler
      map.on('dblclick', function(e) {
        const newZoom = Math.min(map.getZoom() + 1, 18);
        map.flyTo(e.latlng, newZoom, {
          duration: 0.8,
          easeLinearity: 0.25
        });
      });

      // Add keyboard navigation
      map.on('keydown', function(e) {
        if (e.key === '+') {
          const newZoom = Math.min(map.getZoom() + 1, 18);
          map.flyTo(map.getCenter(), newZoom, {
            duration: 0.5,
            easeLinearity: 0.25
          });
        } else if (e.key === '-') {
          const newZoom = Math.max(map.getZoom() - 1, 2);
          map.flyTo(map.getCenter(), newZoom, {
            duration: 0.5,
            easeLinearity: 0.25
          });
        }
      });

      // Initialize terminator and time updates
      updateCityTimes();
      setInterval(updateCityTimes, 1000); // Update times every second
    }

    // Update showCityInfo function to handle photos and add click listeners
    function showCityInfo(cityId) {
      document.querySelectorAll('.city-info').forEach(info => {
        info.classList.remove('active');
      });

      const cityInfo = document.getElementById(cityId);
      if (cityInfo) {
        // Update description from JavaScript data
        const description = cityInfo.querySelector('.city-description');
        if (description && cities[cityId]) {
          description.textContent = cities[cityId].description;
        }

        // Update photos from JavaScript data
        const gallery = cityInfo.querySelector('.city-gallery');
        if (gallery && cities[cityId].photos) {
          gallery.innerHTML = cities[cityId].photos.map(photo => 
            `<img src="${photo.src}" alt="${photo.alt}">`
          ).join('');

          // Add click listeners to the newly added images
          const images = gallery.querySelectorAll('img');
          images.forEach(img => {
            img.onclick = function(){
              const modal = document.getElementById("photoModal");
              const modalImg = document.getElementById("modalImage");
              const captionText = document.getElementById("caption");
              modal.style.display = "block";
              modalImg.src = this.src;
              captionText.innerHTML = this.alt;
            }
          });
        }
        
        cityInfo.classList.add('active');
        cityInfo.scrollIntoView({ 
          behavior: 'smooth',
          block: 'start'
        });
      }
    }

    // Function to update popup times
    function updatePopupTimes() {
      Object.entries(cities).forEach(([id, city]) => {
        const marker = map.markers?.[id];
        if (marker) {
          const time = new Date().toLocaleTimeString('en-US', {
            timeZone: city.timezone,
            hour12: true,
            hour: 'numeric',
            minute: '2-digit'
          });
          marker.setPopupContent(`
            <div class="map-popup">
              <h3>${city.name}</h3>
              <p>Last visited: ${city.date}</p>
              <div class="city-time">Current Time: ${time}</div>
            </div>
          `);
        }
      });
    }

    // Initialize map when tours section is shown
    document.querySelector('[data-section="tours"]').addEventListener('click', () => {
      setTimeout(() => {
        initMap();
        // Update popup times every minute
        setInterval(updatePopupTimes, 60000);
      }, 100);
    });

    // Call this function after the map container is created
    document.addEventListener('DOMContentLoaded', addCityInfoSections);

    // Initialize descriptions and photos with click listeners when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      Object.entries(cities).forEach(([id, city]) => {
        // Update description
        const description = document.querySelector(`#${id} .city-description`);
        if (description) {
          description.textContent = city.description;
        }

        // Update photos
        const gallery = document.querySelector(`#${id}-gallery`);
        if (gallery && city.photos) {
          gallery.innerHTML = city.photos.map(photo => 
            `<img src="${photo.src}" alt="${photo.alt}">`
          ).join('');

          // Add click listeners to the newly added images
          const images = gallery.querySelectorAll('img');
          images.forEach(img => {
            img.onclick = function(){
              const modal = document.getElementById("photoModal");
              const modalImg = document.getElementById("modalImage");
              const captionText = document.getElementById("caption");
              modal.style.display = "block";
              modalImg.src = this.src;
              captionText.innerHTML = this.alt;
            }
          });
        }
      });

      // Get the modal and close button
      const modal = document.getElementById("photoModal");

      // When the user clicks the modal background, close it
      if (modal) {
        modal.addEventListener('click', function(event) {
          if (event.target === modal) {
            modal.style.display = "none";
          }
        });
      }
    });
  </script>

  <!-- Photo Modal -->
  <div id="photoModal" class="modal">
    <img class="modal-content" id="modalImage">
    <div id="caption"></div>
  </div>
</body>
</html>