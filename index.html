<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Baichuan ZENG - Portfolio</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="//unpkg.com/globe.gl"></script>
  <style>
    :root {
      --primary-color: #1a365d;
      --secondary-color: #1e40af;
      --accent-color: #64748b;
      --text-primary: #1e293b;
      --text-secondary: #475569;
      --text-muted: #94a3b8;
      --background-primary: #ffffff;
      --background-secondary: #f8fafc;
      --background-tertiary: #f1f5f9;
      --border-color: #e2e8f0;
      --hover-bg: #f8fafc;
      --success-color: #059669;
      --warning-color: #d97706;
      
      /* Layout Variables */
      --container-max-width: 1100px;
      --sidebar-width: 280px;
      --content-padding: 2rem;
      --nav-height: 64px;
      --border-radius: 0px;
      --border-radius-lg: 0px;
      --spacing-xs: 4px;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
      --spacing-2xl: 48px;
      
      /* Professional Shadows - Minimal */
      --shadow-sm: none;
      --shadow-md: none;
      --shadow-lg: 0 2px 4px rgba(0,0,0,0.1);
      --shadow-xl: 0 4px 8px rgba(0,0,0,0.1);
      
      --transition-speed: 0.2s;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
    }

    body {
      font-family: 'Source Sans Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      background: var(--background-secondary);
      color: var(--text-primary);
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
    }

    /* Container for centering content */
    .container {
      max-width: var(--container-max-width);
      margin: 0 auto;
      position: relative;
      background: var(--background-primary);
      min-height: 100vh;
      box-shadow: var(--shadow-xl);
      display: flex;
    }

    /* --- Sidebar --- */
    .sidebar {
      width: var(--sidebar-width);
      background: linear-gradient(180deg, var(--background-secondary) 0%, var(--background-tertiary) 100%);
      padding: var(--spacing-2xl);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      border-right: 1px solid var(--border-color);
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
    }

    .sidebar::-webkit-scrollbar {
      display: none; /* Chrome, Safari, Opera */
    }

    .sidebar .logo {
      margin-bottom: var(--spacing-md);
      transition: transform var(--transition-speed);
    }

    .sidebar .logo:hover {
      transform: translateY(-2px);
    }

    .sidebar .logo img {
      max-width: 160px;
      height: auto;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }

    .profile-photo {
      width: 200px;
      height: auto;
      border-radius: var(--border-radius-lg);
      object-fit: cover;
      border: 3px solid var(--background-primary);
      box-shadow: var(--shadow-lg);
      margin-bottom: var(--spacing-md);
      transition: all var(--transition-speed);
    }

    .profile-photo:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.15);
    }

    .sidebar h1 {
      font-family: 'Inter', sans-serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-color);
      margin-top: var(--spacing-xs);
      margin-bottom: var(--spacing-md);
      line-height: 1.3;
      letter-spacing: -0.025em;
    }

    .sidebar .contact {
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: var(--spacing-sm);
      margin-bottom: var(--spacing-sm);
      line-height: 1.5;
      width: 100%;
    }

    .sidebar .contact a {
      color: var(--text-secondary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
      margin-bottom: var(--spacing-xs);
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--border-radius);
      transition: all var(--transition-speed);
      font-weight: 500;
    }

    .sidebar .contact a i {
      flex-shrink: 0;
      width: 14px;
      text-align: center;
      font-size: 12px;
    }

    .sidebar .contact a:hover {
      color: var(--primary-color);
      background-color: var(--background-primary);
      transform: translateX(4px);
    }

    .social-links {
      margin-top: var(--spacing-sm);
      display: flex;
      gap: var(--spacing-sm);
      justify-content: center;
    }

    .social-links a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      color: var(--text-secondary);
      background-color: var(--background-primary);
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      text-decoration: none;
      transition: all var(--transition-speed);
      font-size: 15px;
    }

    .social-links a:hover {
      color: var(--background-primary);
      background-color: var(--primary-color);
      border-color: var(--primary-color);
      transform: translateY(-2px);
    }

    /* Main Content Area */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* Professional Navigation */
    .nav-bar {
      background: var(--background-primary);
      padding: 0 var(--spacing-2xl);
      display: flex;
      gap: var(--spacing-2xl);
      border-bottom: 1px solid var(--border-color);
      height: var(--nav-height);
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-link {
      color: var(--text-secondary);
      text-decoration: none;
      padding: var(--spacing-md) var(--spacing-lg);
      position: relative;
      font-weight: 500;
      font-size: 15px;
      transition: color var(--transition-speed);
      border-radius: var(--border-radius);
    }

    .nav-link:hover, .nav-link.active {
      color: var(--primary-color);
      background-color: transparent;
    }

    .nav-link.active {
      border-bottom: 2px solid var(--primary-color);
    }

    /* Content Sections */
    .content-wrapper {
      flex: 1;
      padding: var(--spacing-2xl);
      overflow-y: auto;
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    .section-content {
      max-width: 100%;
      line-height: 1.5;
      font-size: 0.95rem;
      text-align: justify;
    }

    .section-item {
      margin-bottom: var(--spacing-lg);
      padding-bottom: var(--spacing-md);
      border-bottom: 1px solid var(--border-color);
    }

    .section-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    /* Typography - Professional and clean */
    h1 {
      font-family: 'Inter', sans-serif;
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: var(--spacing-lg);
    }

    h2 {
      font-family: 'Inter', sans-serif;
      font-size: 1.8rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: var(--spacing-lg);
      padding-bottom: var(--spacing-sm);
      border-bottom: 2px solid var(--primary-color);
    }

    h3 {
      font-family: 'Inter', sans-serif;
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-top: var(--spacing-md);
      margin-bottom: var(--spacing-sm);
    }

    h4 {
      font-family: 'Inter', sans-serif;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: var(--spacing-xs);
    }

    p {
      margin-bottom: var(--spacing-sm);
      line-height: 1.5;
      color: var(--text-secondary);
      font-size: 0.95rem;
      text-align: justify;
    }

    /* Professional Lists */
    ul {
      padding-left: 0;
      list-style-type: none;
      margin-bottom: var(--spacing-sm);
    }

    li {
      margin-bottom: var(--spacing-sm);
      position: relative;
      padding-left: var(--spacing-lg);
      line-height: 1.5;
      color: var(--text-secondary);
      font-size: 0.95rem;
      text-align: justify;
    }

    li::before {
      content: "â€¢";
      color: var(--primary-color);
      position: absolute;
      left: var(--spacing-sm);
      font-weight: bold;
      font-size: 16px;
    }

    /* Subsections */
    .subsection {
      margin-bottom: var(--spacing-lg);
      padding: 0;
      background: transparent;
      border-left: none;
    }

    /* Language Proficiency with circles */
    .language-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
    }

    .language-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-sm) 0;
    }

    .language-name {
      font-weight: 500;
      color: var(--primary-color);
      font-size: 0.95rem;
    }

    .proficiency-circles {
      display: flex;
      gap: 3px;
    }

    .circle {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: var(--border-color);
    }

    .circle.filled {
      background-color: var(--primary-color);
    }

    /* Publications */
    .publication-item {
      display: flex;
      gap: var(--spacing-lg);
      padding: var(--spacing-lg) 0;
      border-left: none;
      margin-bottom: var(--spacing-lg);
      background: transparent;
      border-bottom: 1px solid var(--border-color);
      align-items: flex-start;
    }

    .publication-item:last-child {
      border-bottom: none;
    }

    .publication-image {
      flex-shrink: 0;
      width: 200px;
      height: 150px;
      overflow: hidden;
      border-radius: 4px;
      border: 1px solid var(--border-color);
    }

    .publication-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    .publication-content {
      flex: 1;
      min-width: 0;
    }

    .publication-title {
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: var(--spacing-xs);
      line-height: 1.4;
    }

    .publication-venue {
      color: var(--secondary-color);
      font-weight: 500;
      margin-bottom: var(--spacing-xs);
      font-style: italic;
      font-size: 0.9rem;
    }

    .publication-meta {
      color: var(--text-muted);
      font-size: 0.85rem;
    }

    /* Responsive adjustments for larger images */
    @media (max-width: 992px) {
      .publication-item {
        flex-direction: column;
        gap: var(--spacing-md);
      }
      
      .publication-image {
        width: 100%;
        height: 250px; /* Increased from 200px for mobile */
        align-self: center;
        max-width: 400px; /* Increased from 300px */
      }
    }

    @media (max-width: 480px) {
      .publication-image {
        height: 200px; /* Increased from 150px for small mobile */
        max-width: 100%;
      }
    }

    /* Responsive Design */
    @media (max-width: 1440px) {
      .container {
        max-width: 100%;
        margin: 0 20px;
      }
    }

    @media (max-width: 992px) {
      .container {
        flex-direction: column;
        margin: 0;
      }
      
      .sidebar {
        width: 100%;
        height: auto;
        position: static;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-lg);
      }

      .sidebar .logo img {
        max-width: 100px;
      }

      .profile-photo {
        width: 120px;
        margin-bottom: 0;
        margin-right: var(--spacing-lg);
      }

      .sidebar h1 {
        font-size: 18px;
        margin-bottom: 0;
      }

      .sidebar .contact {
        font-size: 12px;
        display: flex;
        flex-wrap: wrap;
        gap: var(--spacing-sm);
      }

      .sidebar .contact a {
        margin: 0;
        padding: var(--spacing-xs) var(--spacing-sm);
      }

      .social-links {
        margin-top: 0;
        gap: var(--spacing-sm);
      }

      .social-links a {
        width: 32px;
        height: 32px;
        font-size: 14px;
      }

      .nav-bar {
        padding: var(--spacing-md) var(--spacing-lg);
        gap: var(--spacing-lg);
        overflow-x: auto;
      }

      .content-wrapper {
        padding: var(--spacing-lg);
      }

      h1 {
        font-size: 2rem;
      }

      h2 {
        font-size: 1.75rem;
      }

      h3 {
        font-size: 1.25rem;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .sidebar {
        flex-direction: column;
        text-align: center;
      }

      .profile-photo {
        margin-right: 0;
        margin-bottom: var(--spacing-md);
      }

      .sidebar .contact {
        flex-direction: column;
        width: 100%;
      }

      .content-wrapper {
        padding: var(--spacing-md);
      }

      .section-item {
        padding: var(--spacing-lg);
      }

      .city-gallery {
        grid-template-columns: 1fr;
      }
    }

    /* Map Styles */
    #Map {
      height: 600px;
      width: 100%;
      max-width: 700px;
      margin: 0 auto var(--spacing-xl) auto;
      border-radius: 8px;
      overflow: visible;
      z-index: 1;
      background: transparent;
      position: relative;
    }

    #Map.map-2d {
      overflow: hidden;
    }

    #Map.map-3d {
      overflow: visible;
    }

    /* Map Toggle Button */
    .map-toggle-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 10000;
      background: white;
      border: 2px solid var(--primary-color);
      color: var(--primary-color);
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      gap: 6px;
      pointer-events: auto;
    }

    .map-toggle-btn:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    }

    .map-toggle-btn i {
      font-size: 16px;
    }

    .map-container {
      position: relative;
      overflow: hidden;
      z-index: 1;
      border-radius: 8px;
    }

    /* Map Popup Styles */
    .map-popup h3 {
      margin: 0 0 8px 0;
      color: var(--primary-color);
      font-size: 16px;
      font-weight: 600;
    }

    .map-popup p {
      margin: 4px 0;
      color: var(--text-secondary);
      font-size: 13px;
    }

    /* Custom Leaflet Marker Styles */
    .custom-marker {
      background: transparent !important;
      border: none !important;
    }

    .leaflet-popup-content-wrapper {
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .leaflet-popup-content {
      margin: 12px;
      font-family: 'Source Sans Pro', sans-serif;
    }

    .city-info {
      padding: 0;
      background: var(--background-primary);
      margin-top: var(--spacing-2xl);
      display: none;
      border: none;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 16px rgba(0,0,0,0.08);
    }

    .city-info.active {
      display: block;
      animation: fadeInUp 0.4s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .city-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-xl) var(--spacing-2xl);
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      color: white;
      margin-bottom: 0;
      border-bottom: none;
    }

    .city-header h3 {
      margin: 0;
      color: white;
      font-size: 28px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .city-date {
      color: rgba(255, 255, 255, 0.95);
      font-size: 14px;
      font-weight: 600;
      background: rgba(255, 255, 255, 0.2);
      padding: 6px 16px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .city-description {
      padding: var(--spacing-xl) var(--spacing-2xl);
      font-size: 16px;
      line-height: 1.7;
      color: var(--text-secondary);
      background: var(--background-secondary);
      border-left: 4px solid var(--primary-color);
      margin: 0;
      font-style: italic;
    }

    .gallery-header {
      padding: var(--spacing-lg) var(--spacing-2xl) 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .gallery-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }

    .gallery-title i {
      font-size: 16px;
    }

    .photo-count {
      font-size: 13px;
      color: var(--text-muted);
      background: var(--background-secondary);
      padding: 4px 12px;
      border-radius: 12px;
      font-weight: 500;
    }

    .city-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: var(--spacing-xl);
      padding: var(--spacing-xl) var(--spacing-2xl) var(--spacing-2xl);
      background: var(--background-primary);
    }

    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      background: var(--background-secondary);
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .gallery-item:hover {
      transform: translateY(-12px);
      box-shadow: 0 16px 32px rgba(0,0,0,0.12);
    }

    .gallery-item img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .gallery-item:hover img {
      transform: scale(1.05);
    }

    .gallery-item-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(26, 54, 93, 0.95) 0%, rgba(26, 54, 93, 0.7) 50%, transparent 100%);
      color: white;
      padding: var(--spacing-xl) var(--spacing-lg) var(--spacing-md);
      transform: translateY(100%);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
    }

    .gallery-item:hover .gallery-item-overlay {
      transform: translateY(0);
    }

    .gallery-item-caption {
      font-size: 14px;
      font-weight: 500;
      line-height: 1.4;
      flex: 1;
    }

    .gallery-item-icon {
      font-size: 18px;
      opacity: 0.9;
      margin-left: var(--spacing-sm);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .city-gallery {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: var(--spacing-lg);
      }
      
      .gallery-item-overlay {
        transform: translateY(0);
        background: linear-gradient(to top, rgba(26, 54, 93, 0.85) 0%, transparent 100%);
      }
    }

    /* Photo Modal */
    .modal {
      display: none !important;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
    }

    .modal[style*="display: block"] {
      display: flex !important;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      max-width: 90vw;
      max-height: 80vh;
      object-fit: contain;
      border-radius: 4px;
    }

    #caption {
      position: absolute;
      bottom: var(--spacing-lg);
      left: 50%;
      transform: translateX(-50%);
      color: white;
      text-align: center;
      padding: var(--spacing-md) var(--spacing-lg);
      background: rgba(0, 0, 0, 0.8);
      max-width: 80%;
      font-weight: 500;
      border-radius: 4px;
    }

    /* Back to Top Button */
    .back-to-top {
      position: fixed;
      bottom: var(--spacing-xl);
      right: var(--spacing-xl);
      background: var(--primary-color);
      color: white;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      opacity: 0;
      transition: opacity var(--transition-speed);
      z-index: 999;
      font-size: 18px;
    }

    .back-to-top.visible {
      opacity: 1;
    }

    .back-to-top:hover {
      background: var(--secondary-color);
      color: white;
      text-decoration: none;
    }

a {
  color: var(--text-secondary);
  text-decoration: none;
  font-weight: 500;
  transition: all var(--transition-speed);
}

a:hover, a:focus {
  color: var(--primary-color);
  text-decoration: underline;
  text-decoration-color: var(--primary-color);
  text-underline-offset: 2px;
  text-decoration-thickness: 1px;
}

.section-item {
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--border-color);
}

h3 {
  font-family: 'Inter', sans-serif;
  font-size: 1.3rem;
  font-weight: 600;
  color: var(--primary-color);
  margin-top: var(--spacing-md);
  margin-bottom: var(--spacing-sm);
}

.news-container {
  display: flex;
  flex-direction: column;
}

.news-item {
  display: flex;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--background-secondary);
  border-radius: 8px;
}

.news-date {
  color: var(--primary-color);
  font-size: 0.9rem;
  font-weight: 600;
  min-width: 85px;
  flex-shrink: 0;
}

.news-content {
  color: var(--text-secondary);
  font-size: 0.95rem;
  line-height: 1.5;
}
  </style>
</head>

<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <a href="https://www.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">
          <img src="media/cuhk-logo.PNG" alt="CUHK Logo">
        </a>
      </div>
      <img src="media/me_bmw-museum.jpg" alt="Baichuan ZENG" class="profile-photo">
      <h1 id="nameDisplay" onclick="cycleName()" style="cursor: pointer;">Baichuan ZENG, Nokk</h1>
      <div class="contact">
        <a href="javascript:void(0)" onclick="copyPhoneNumber()" id="phoneLink">
          <i class="fas fa-phone"></i> +852-68502154
        </a>
        <a href="javascript:void(0)" onclick="copyEmail('baichuan@link.cuhk.edu.hk', 'schoolEmailLink')" id="schoolEmailLink">
          <i class="fas fa-envelope"></i> baichuan@link.cuhk.edu.hk
        </a>
        <a href="javascript:void(0)" onclick="copyEmail('zbc2385505079@gmail.com', 'privateEmailLink')" id="privateEmailLink">
          <i class="fas fa-envelope-open"></i> zbc2385505079@gmail.com
        </a>
      </div>
      <div class="social-links">
        <a href="https://github.com/NokkTsang" target="_blank" rel="noopener noreferrer" title="GitHub">
          <i class="fab fa-github"></i>
        </a>
        <a href="https://www.linkedin.com/in/nokk-tsang-zbc68502154/" target="_blank" rel="noopener noreferrer" title="LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
        <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" title="Instagram">
          <i class="fab fa-instagram"></i>
        </a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Navigation -->
      <nav class="nav-bar">
        <a href="#home" class="nav-link active" data-section="home">About</a>
        <a href="#publications" class="nav-link" data-section="publications">Publications</a>
        <a href="#cv" class="nav-link" data-section="cv">CV</a>
        <a href="#photograph" class="nav-link" data-section="photograph">Gallery</a>
      </nav>

      <!-- Content Wrapper -->
      <div class="content-wrapper">
        <!-- About Me Section -->
        <section id="home" class="section active">
          <div class="section-content">
            <h2>About Me</h2>
            
            <div class="section-item">
              <p>
                As a senior year undergraduate student passionate about AI agents and 3D Vision, I am currently involved in two key projects: Machine Learning for Molecular Prediction - training models to predict inhibitors of Tdp1, contributing to drug discovery with members from the Faculty of Medicine of CUHK; Computer Vision for Spatial Understanding - the final year project under <a href="https://www.cse.cuhk.edu.hk/~cwfu/" target="_blank" rel="noopener noreferrer">Prof. Chi-Wing FU, Philip</a>, focusing on mixed reality for surgical navigation and training. I am particularly interested in how intelligent agents can be integrated into the exploration of the physical and digital world.
              </p>
              <p>Area of interest: Artificial Intelligence, Machine Learning, Computer Vision, Mixed Reality, Robotics, Embodied Intelligence</p>
            </div>

            <div class="section-item">
              <h3><em>NewsðŸ“¢</em></h3>
              <div class="news-item">
                <div class="news-date"><em>20 Oct 2025</em></div>
                <div class="news-content">Go for IROS 2025 in Hangzhou !</div>
              </div>
              <div class="news-item">
                <div class="news-date"><em>28 July - 28 August 2025</em></div>
                <div class="news-content">Will attend Heidelberg University International Summer School in Germany.</div>
              </div>
              <div class="news-item">
                <div class="news-date"><em>18 May 2025</em></div>
                <div class="news-content">Go for ICRA 2025 in Atlanta !</div>
              </div>
            </div>

            <div class="section-item">
                <h3><em>Educations</em></h3>
              <div class="info-grid">
                <div class="info-item">
                  <div style="display: flex; justify-content: space-between; align-items: center;">
                  <h4><a href="https://www.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">The Chinese University of Hong Kong</a></h4>
                  <p style="margin: 0; cursor: pointer;" onclick="showCityInGallery('hongKong')"><i class="fas fa-map-marker-alt"></i> Hong Kong SAR</p>
                  </div>
                  <p><strong>B.Sc. in Computer Science</strong></p>
                  <div class="meta">Sep 2022 â€“ Jul 2026 (Anticipated)</div>
                  <p>College: <a href="https://www.shho.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">S.H. HO College</a> | Advisor: <a href="https://www.cse.cuhk.edu.hk/~taoyf/" target="_blank" rel="noopener noreferrer">Prof. Yu-Fei TAO</a></p>
                </div>
                
                <div class="info-item" style="margin-top: var(--spacing-lg);">
                  <div style="display: flex; justify-content: space-between; align-items: center;">
                  <h4><a href="https://www.uni-heidelberg.de/de" target="_blank" rel="noopener noreferrer">Heidelberg University</a></h4>
                  <p style="cursor: pointer;" onclick="showCityInGallery('heidelberg')"><i class="fas fa-map-marker-alt"></i> Heidelberg, Germany</p>
                  </div>
                  <p><strong>International Summer School</strong></p>
                  <div class="meta">Jul 2025 - Aug 2025</div>
                </div>
                
                <div class="info-item" style="margin-top: var(--spacing-lg);">
                  <div style="display: flex; justify-content: space-between; align-items: center;">
                  <h4><a href="https://www.heungto.edu.hk/" target="_blank" rel="noopener noreferrer">Heung To Middle School</a></h4>
                  <p style="cursor: pointer;" onclick="showCityInGallery('hongKong')"><i class="fas fa-map-marker-alt"></i> Hong Kong SAR</p>
                  </div>
                  <p><strong>Secondary Education</strong></p>
                  <div class="meta">Sep 2018 â€“ Jul 2022</div>
                </div>
              </div>
            </div>

            <div class="section-item">
              <h3><em>Research Experience</em></h3>
              <div class="subsection">
                <h4>Participant</h4>
                <div class="meta">Online Program in Computer Vision in Robotics</div>
                <p>
                  â€¢ Advised by <a href="https://guangmingw.github.io/" target="_blank" rel="noopener noreferrer">Dr. Guangming Wang</a> from University of Cambridge<br/>
                  â€¢ Completed a review paper: <a href="https://arxiv.org/abs/2504.15970" target="_blank" rel="noopener noreferrer">Recent Advances and Future Directions in Extended Reality (XR): Exploring AI-Powered Spatial Intelligence</a> as the project
                </p>
              </div>
              <div class="subsection">
                <h4>Summer Research</h4>
                <div class="meta">Shanghai Jiao Tong University | Jul 2023 â€“ Aug 2023</div>
                <p>
                  â€¢ Advised by <a href="https://soo.sjtu.edu.cn/en/teacher-list/zengzheng.html" target="_blank" rel="noopener noreferrer">Prof. Zheng Zeng</a><br/>
                  â€¢ Worked on design and implementation of Morphing Hybrid Aerial-Underwater vehicle<br/>
                  â€¢ Conducted outdoor experiments, data analysis, and contributed to paper writing
                </p>
              </div>
            </div>

            <div class="section-item">
              <h3><em>Awards and Honors</em></h3>
              <ul>
                <li><strong>Overseas Academic Activities Scholarship</strong>, S.H. HO College, CUHK (Jul 2024)</li>
                <li><strong>Summer Institue Exchange Scholarship</strong>, S.H. HO College, CUHK (Jun 2025)</li>
                <li><strong>ELITE Stream Student</strong>, Faculty of Engineering, CUHK (Sep 2022 â€“ Dec 2024)</li>
                <li><strong>Best Performance, Individual Winner</strong>, Hong Kong Mathematics Olympiad (Jul 2021): Full-mark in Paper Two</li>
                <li><strong>Third Honor Award</strong>, Hong Kong Physics Olympiad (Aug 2020)</li>
              </ul>
            </div>

            <div class="section-item">
              <h3><em>Technical Skills</em></h3>
              <div class="info-grid">
                <div class="info-item">
                  <h4>Programming Languages</h4>
                    <ul>
                    <li>C/C++/C#</li>
                    <li>Java</li>
                    <li>Python</li>
                    <li>SQL</li>
                    <li>HTML</li>
                    <li>JavaScript</li>
                    </ul>
                </div>
                <div class="info-item">
                  <h4>Tools & Frameworks & Platforms</h4>
                    <ul>
                    <li>AI/ML: Pytorch</li>
                    <li>XR Development: Unity, NVIDIA CloudXR</li>
                    <li>Simulation: NVIDIA Omniverse, Isaac, Gazebo</li>
                    <li>Computer Vision: OpenCV</li>
                    <li>Robotics: ROS</li>
                    <li>Drone Operations: GAAS</li>
                    <li>3D Modeling: Blender</li>
                    </ul>
                </div>
                <div class="info-item">
                  <h4>Areas of Expertise</h4>
                  <ul>
                  <li>Algorithm Design & Analysis</li>
                  <li>Machine Learning Pipelines</li>
                  <li>Software Development Life Cycle</li>
                  <li>Database Administration & Management</li>
                  <li>Project Management & Coordination</li>
                  <li>Technical Writing & Documentation</li>
                  <li>3D Modeling & Digital Content Creation</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="section-item">
              <h3><em>Language Proficiency</em></h3>
              <div class="language-grid">
                <div class="language-item">
                  <span class="language-name">English</span>
                  <div class="proficiency-circles">
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle"></div>
                  </div>
                </div>
                <div class="language-item">
                  <span class="language-name">Mandarin</span>
                  <div class="proficiency-circles">
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                  </div>
                </div>
                <div class="language-item">
                  <span class="language-name">Cantonese</span>
                  <div class="proficiency-circles">
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle"></div>
                  </div>
                </div>
                <div class="language-item">
                  <span class="language-name">German</span>
                  <div class="proficiency-circles">
                    <div class="circle filled"></div>
                    <div class="circle filled"></div>
                    <div class="circle"></div>
                    <div class="circle"></div>
                    <div class="circle"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="section-item">
              <h3><em>Relevant Coursework</em></h3>
              <ul>
                <li>CSCI 3100 - Software Engineering</li>
                <li>CSCI 3180 - Principles of Programming Language</li>
                <li>CSCI 3320 - Fundamentals of Machine Learning</li>
                <li>CSCI 3130 - Formal Languages & Automata Theory</li>
                <li>CSCI 3150 - Intro to Operating Systems</li>
                <li>CSCI 3160 - Design & Analysis of Algorithms</li>
                <li>CSCI 3170 - Intro to Database Systems</li>
                <li>CENG 3420 - Computer Organization & Design</li>
                <li>CSCI 2100 - Data Structures</li>
                <li>ENGG 2780 - Statistics for Engineers</li>
                <li>ENGG 2440 - Discrete Math for Engineers</li>
                <li>ENGG 2760 - Probability for Engineers</li>
              </ul>
            </div>

            <div class="section-item">
              <h3><em>Extra-Curricular Activities</em></h3>
              <ul>
                <li>Exhibitor, Dental South China International Expo, Guangzhou (Mar 2024)</li>
                <li>Member, SHHO College Table Tennis Team (Sep 2023 â€“ Present)</li>
                <li>Member, SHHO College Basketball Team (Jul 2022 â€“ Jun 2024)</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Publications Section -->
        <section id="publications" class="section">
          <div class="section-content">
            <h2>Publications</h2>
            <div class="publication-item">
              <div class="publication-image">
                <img src="media/DRL_UAV.png" alt="DRL_UAV">
              </div>
              <div class="publication-content">
                <div class="publication-title">Cognitive UAV Tracking: Leveraging DRL and Hybrid Curriculum Learning for Target Reacquisition</div>
                <div class="publication-venue">IEEE Transactions on Automation Science and Engineering (TASE)</div>
                <div class="publication-meta">Accepted: June 2025 | <strong>Second Author</strong></div>
              </div>
            </div>
            <div class="publication-item">
              <div class="publication-image">
                <img src="media/Nezha_MB.png" alt="Nezha-MB">
              </div>
              <div class="publication-content">
                <div class="publication-title">Nezha-MB: Design and Implementation of a Morphing Hybrid Aerial-Underwater Vehicle</div>
                <div class="publication-venue">IEEE International Conference on Robotics and Automation (ICRA 2025)</div>
                <div class="publication-meta">Accepted: January 2025 | <strong>Third Author</strong></div>
              </div>
            </div>
            <div class="publication-item">
              <div class="publication-image">
                <img src="media/XR_review.png" alt="XR_review">
              </div>
              <div class="publication-content">
                <div class="publication-title">Recent Advances and Future Directions in Extended Reality (XR): Exploring AI-Powered Spatial Intelligence</div>
                <div class="publication-venue">arXiv preprint arXiv:2504.15970</div>
                <div class="publication-meta">Submitted: April 2025 | <strong>First Author</strong></div>
              </div>
          </div>
        </section>

        <!-- CV Section -->
        <section id="cv" class="section">
          <div class="section-content">
            <h2>Curriculum Vitae</h2>
            <p>My detailed CV is currently in progress. Please check back later for updates.</p>
            <a href="#" class="btn">
              <i class="fas fa-download"></i>
              Download CV (Coming Soon)
            </a>
          </div>
        </section>

        <!-- Gallery Section -->
        <section id="photograph" class="section">
          <div class="section-content">
            <h2>Global Footprint</h2>
            <div class="map-container">
              <div id="Map" class="map-3d"></div>
            </div>
            
            <!-- ===== North America ===== -->
            <!-- Los Angeles -->
            <div id="losAngeles" class="city-info">
              <div class="city-header">
                <h3>Los Angeles</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="losAngeles-gallery"></div>
            </div>

            <!-- San Francisco -->
            <div id="sanFrancisco" class="city-info">
              <div class="city-header">
                <h3>San Francisco</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="sanFrancisco-gallery"></div>
            </div>

            <!-- New York -->
            <div id="newYork" class="city-info">
              <div class="city-header">
                <h3>New York City</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="newYork-gallery"></div>
            </div>

            <!-- Atlanta -->
            <div id="atlanta" class="city-info">
              <div class="city-header">
                <h3>Atlanta</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="atlanta-gallery"></div>
            </div>

            <!-- ===== Europe ===== -->
            <!-- Stuttgart -->
            <div id="stuttgart" class="city-info">
              <div class="city-header">
                <h3>Stuttgart</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="stuttgart-gallery"></div>
            </div>

            <!-- Amsterdam -->
            <div id="amsterdam" class="city-info">
              <div class="city-header">
                <h3>Amsterdam</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="amsterdam-gallery"></div>
            </div>

            <!-- Cologne -->
            <div id="cologne" class="city-info">
              <div class="city-header">
                <h3>Cologne</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="cologne-gallery"></div>
            </div>

            <!-- DÃ¼sseldorf -->
            <div id="dusseldorf" class="city-info">
              <div class="city-header">
                <h3>DÃ¼sseldorf</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="dusseldorf-gallery"></div>
            </div>

            <!-- Heidelberg -->
            <div id="heidelberg" class="city-info">
              <div class="city-header">
                <h3>Heidelberg</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="heidelberg-gallery"></div>
            </div>

            <!-- Baden-Baden -->
            <div id="badenBaden" class="city-info">
              <div class="city-header">
                <h3>Baden-Baden</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="badenBaden-gallery"></div>
            </div>

            <!-- Mannheim -->
            <div id="mannheim" class="city-info">
              <div class="city-header">
                <h3>Mannheim</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="mannheim-gallery"></div>
            </div>

            <!-- Munich -->
            <div id="munich" class="city-info">
              <div class="city-header">
                <h3>Munich</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="munich-gallery"></div>
            </div>

            <!-- Grossglockner -->
            <div id="grossglockner" class="city-info">
              <div class="city-header">
                <h3>Grossglockner</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="grossglockner-gallery"></div>
            </div>

            <!-- Paris -->
            <div id="paris" class="city-info">
              <div class="city-header">
                <h3>Paris</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="paris-gallery"></div>
            </div>
            <!-- Innsbruck -->
            <div id="innsbruck" class="city-info">
              <div class="city-header">
                <h3>Innsbruck</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="innsbruck-gallery"></div>
            </div>

            <!-- ===== East Asia ===== -->
            <!-- Tokyo -->
            <div id="tokyo" class="city-info">
              <div class="city-header">
                <h3>Tokyo</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="tokyo-gallery"></div>
            </div>

            <!-- Osaka -->
            <div id="osaka" class="city-info">
              <div class="city-header">
                <h3>Osaka</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="osaka-gallery"></div>
            </div>

            <!-- Kyoto -->
            <div id="kyoto" class="city-info">
              <div class="city-header">
                <h3>Kyoto</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="kyoto-gallery"></div>
            </div>

            <!-- Fuji -->
            <div id="fuji" class="city-info">
              <div class="city-header">
                <h3>Fuji</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="fuji-gallery"></div>
            </div>

            <!-- Kamakura -->
            <div id="kamakura" class="city-info">
              <div class="city-header">
                <h3>Kamakura</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="kamakura-gallery"></div>
            </div>

            <!-- Yokohama -->
            <div id="yokohama" class="city-info">
              <div class="city-header">
                <h3>Yokohama</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="yokohama-gallery"></div>
            </div>

            <!-- Fukuoka -->
            <div id="fukuoka" class="city-info">
              <div class="city-header">
                <h3>Fukuoka</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="fukuoka-gallery"></div>
            </div>

            <!-- Kitakyushu -->
            <div id="kitakyushu" class="city-info">
              <div class="city-header">
                <h3>Kitakyushu</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="kitakyushu-gallery"></div>
            </div>

            <!-- Shimonoseki -->
            <div id="shimonoseki" class="city-info">
              <div class="city-header">
                <h3>Shimonoseki</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="shimonoseki-gallery"></div>

            <!-- Seoul -->
            <div id="seoul" class="city-info">
              <div class="city-header">
                <h3>Seoul</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="seoul-gallery"></div>
            </div>

            <!-- Busan -->
            <div id="busan" class="city-info">
              <div class="city-header">
                <h3>Busan</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="busan-gallery"></div>
            </div>

            <!-- ===== West Asia ===== -->
            <!-- Dubai -->
            <div id="dubai" class="city-info">
              <div class="city-header">
                <h3>Dubai</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="dubai-gallery"></div>
            </div>

            <!-- Doha -->
            <div id="doha" class="city-info">
              <div class="city-header">
                <h3>Doha</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="doha-gallery"></div>
            </div>

            <!-- ===== China ===== -->
            <!-- Shanghai -->
            <div id="shanghai" class="city-info">
              <div class="city-header">
                <h3>Shanghai</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="shanghai-gallery"></div>
            </div>

            <!-- Beijing -->
            <div id="beijing" class="city-info">
              <div class="city-header">
                <h3>Beijing</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="beijing-gallery"></div>
            </div>

            <!-- Taiwan -->
            <!-- Taipei -->
            <div id="taipei" class="city-info">
              <div class="city-header">
                <h3>Taipei</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="taipei-gallery"></div>
            </div>

            <!-- Kaohsiung -->
            <div id="kaohsiung" class="city-info">
              <div class="city-header">
                <h3>Kaohsiung</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="kaohsiung-gallery"></div>
            </div>

            <!-- Macau -->
            <div id="macau" class="city-info">
              <div class="city-header">
                <h3>Macau</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="macau-gallery"></div>
            </div>

            <!-- Guangdong Province-->
            <!-- Shenzhen -->
            <div id="shenzhen" class="city-info">
              <div class="city-header">
                <h3>Shenzhen</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="shenzhen-gallery"></div>
            </div>

            <!-- Guangzhou -->
            <div id="guangzhou" class="city-info">
              <div class="city-header">
                <h3>Guangzhou</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="guangzhou-gallery"></div>
            </div>

            <!-- Chongqing -->
            <div id="chongqing" class="city-info">
              <div class="city-header">
                <h3>Chongqing</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="chongqing-gallery"></div>
            </div>

            <!-- Hunan Province-->
            <!-- Changsha -->
            <div id="changsha" class="city-info">
              <div class="city-header">
                <h3>Changsha</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="changsha-gallery"></div>
            </div>

            <!-- Zhangjiajie -->
            <div id="zhangjiajie" class="city-info">
              <div class="city-header">
                <h3>Zhangjiajie</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="zhangjiajie-gallery"></div>
            </div>

            <!-- Yueyang -->
            <div id="yueyang" class="city-info">
              <div class="city-header">
                <h3>Yueyang</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="yueyang-gallery"></div>
            </div>

            <!-- Shaoyang -->
            <div id="shaoyang" class="city-info">
              <div class="city-header">
                <h3>Shaoyang</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="shaoyang-gallery"></div>
            </div>

            <!-- Fujian Province-->
            <!-- Xiamen -->
            <div id="xiamen" class="city-info">
              <div class="city-header">
                <h3>Xiamen</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="xiamen-gallery"></div>
            </div>

            <!-- Sichuan Province-->
            <!-- Chengdu -->
            <div id="chengdu" class="city-info">
              <div class="city-header">
                <h3>Chengdu</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="chengdu-gallery"></div>
            </div>

            <!-- Zhejiang Province-->
            <!-- Hangzhou -->
            <div id="hangzhou" class="city-info">
              <div class="city-header">
                <h3>Hangzhou</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="hangzhou-gallery"></div>
            </div>

            <!-- Suzhou -->
            <div id="suzhou" class="city-info">
              <div class="city-header">
                <h3>Suzhou</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="suzhou-gallery"></div>
            </div>

            <!-- Shaanxi Province-->
            <!-- Xi'an -->
            <div id="xian" class="city-info">
              <div class="city-header">
                <h3>Xi'an</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="xian-gallery"></div>
            </div>

            <!-- Shandong Province-->
            <!-- Qingdao -->
            <div id="qingdao" class="city-info">
              <div class="city-header">
                <h3>Qingdao</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="qingdao-gallery"></div>
            </div>

            <!-- Yantai -->
            <div id="yantai" class="city-info">
              <div class="city-header">
                <h3>Yantai</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="yantai-gallery"></div>
            </div>

            <!-- Weihai -->
            <div id="weihai" class="city-info">
              <div class="city-header">
                <h3>Weihai</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="weihai-gallery"></div>
            </div>

            <!-- Taian -->
            <div id="taian" class="city-info">
              <div class="city-header">
                <h3>Taian</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="taian-gallery"></div>
            </div>

            <!-- ===== Current Base ===== -->
            <!-- Hong Kong -->
            <div id="hongKong" class="city-info">
              <div class="city-header">
                <h3>Hong Kong</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="hongKong-gallery"></div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- Back to Top Button -->
  <a href="#" class="back-to-top" id="backToTop">
    <i class="fas fa-arrow-up"></i>
  </a>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Name cycling functionality
    let nameIndex = 0;
    const names = [
      'Baichuan ZENG, Nokk',
      'TSANG Pak Chuen',
      'æ›¾ç™¾å·'
    ];

    function cycleName() {
      const nameDisplay = document.getElementById('nameDisplay');
      nameIndex = (nameIndex + 1) % names.length;
      nameDisplay.textContent = names[nameIndex];
    }

    // Function to show city in Gallery page
    function showCityInGallery(cityId) {
      // Switch to Gallery page
      const galleryLink = document.querySelector('a[data-section="photograph"]');
      if (galleryLink) {
        galleryLink.click();
      }
      
      // Wait a bit for the page to switch, then show the city
      setTimeout(() => {
        const cityElement = document.getElementById(cityId);
        if (cityElement) {
          // Hide all city info first
          document.querySelectorAll('.city-info').forEach(info => {
            info.classList.remove('active');
          });
          
          // Show the target city
          cityElement.classList.add('active');
          
          // Scroll to the city
          cityElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }, 100);
    }

    // Existing scripts...

    // Helper function to copy text to clipboard
    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch (err) {
        console.error('Failed to copy: ', err);
        return false;
      }
    }

    // Helper function to show a temporary notification
    function showCopyNotification(element, message) {
      const notification = document.createElement('span');
      notification.textContent = message;
      notification.style.cssText = `
        margin-left: 10px;
        color: green;
        font-size: 0.9em;
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
      `;
      element.parentNode.insertBefore(notification, element.nextSibling);

      setTimeout(() => {
        notification.style.opacity = 0;
        notification.addEventListener('transitionend', () => notification.remove());
      }, 2000); // Show for 2 seconds
    }

    // Function to copy phone number
    async function copyPhoneNumber() {
      const phoneLink = document.getElementById('phoneLink');
      if (!phoneLink) return;
      const phoneNumber = phoneLink.textContent.replace('Tel: ', '').trim();
      const success = await copyToClipboard(phoneNumber);
      if (success) {
        showCopyNotification(phoneLink, 'Copied!');
      }
    }

    // Function to copy email address
    async function copyEmail(email, linkId) {
      const emailLink = document.getElementById(linkId);
      if (!emailLink) return;
      const success = await copyToClipboard(email);
      if (success) {
        showCopyNotification(emailLink, 'Copied!');
      }
    }

    // Back to Top Button
    const backToTopButton = document.getElementById('backToTop');

    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        backToTopButton.classList.add('visible');
      } else {
        backToTopButton.classList.remove('visible');
      }
    });

    backToTopButton.addEventListener('click', (e) => {
      e.preventDefault();
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Smooth scroll for all anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth'
          });
        }
      });
    });

    // Section Navigation
    const sections = document.querySelectorAll('.section');
    const navLinks = document.querySelectorAll('.nav-link');

    function showSection(sectionId) {
      // Hide all sections
      sections.forEach(section => {
        section.classList.remove('active');
      });

      // Remove active class from all nav links
      navLinks.forEach(link => {
        link.classList.remove('active');
      });

      // Show selected section
      const selectedSection = document.getElementById(sectionId);
      if (selectedSection) {
        selectedSection.classList.add('active');
      }

      // Add active class to clicked nav link
      const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
      if (activeLink) {
        activeLink.classList.add('active');
      }
    }

    // Add click event listeners to nav links
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const sectionId = link.getAttribute('data-section');
        showSection(sectionId);
        
        // Update URL hash without scrolling
        history.pushState(null, null, `#${sectionId}`);
      });
    });

    // Handle initial page load
    window.addEventListener('load', () => {
      const hash = window.location.hash.slice(1) || 'home';
      showSection(hash);
    });

    // Handle browser back/forward buttons
    window.addEventListener('popstate', () => {
      const hash = window.location.hash.slice(1) || 'home';
      showSection(hash);
    });

    // Initialize map when photograph section is shown
    let map;
    const cities = {
      // ===== North America =====
      losAngeles: { 
        lat: 34.0522, 
        lng: -118.2437, 
        name: "Los Angeles", 
        date: "2025.05",
        description: "The entertainment capital of the world.",
        timezone: "America/Los_Angeles",
        photos: [
          { src: "media/losangeles1.jpg", alt: "Night view of LA on Griffith Observatory" },
          { src: "media/losangeles2.jpg", alt: "'Swish'" }
        ]
      },
      sanFrancisco: { 
        lat: 37.7749, 
        lng: -122.4194, 
        name: "San Francisco", 
        date: "2025.05",
        description: "The tech hub of Silicon Valley.",
        timezone: "America/Los_Angeles",
        photos: [
          { src: "media/sanfrancisco1.jpg", alt: "Fog immersed Golden Gate Bridge" }
        ]
      },
      newYork: { 
        lat: 40.7128, 
        lng: -74.0060, 
        name: "New York City", 
        date: "2025.05",
        description: "The city that never sleeps.",
        timezone: "America/New_York",
        photos: [
          { src: "media/newyork1.jpg", alt: "The Empire State Building, the Manhattan, the New York" },
          { src: "media/newyork2.jpg", alt: "Copper Green" }
        ]
      },
      atlanta: { 
        lat: 33.7490, 
        lng: -84.3880, 
        name: "Atlanta", 
        date: "2025.05",
        description: "The capital of Georgia and a major business hub.",
        timezone: "America/New_York",
        photos: [
          { src: "media/atlanta1.jpg", alt: "Atlanta Olympic Rings" },
          { src: "media/atlanta2.jpg", alt: "Centennial Olympic Park" }
        ]
      },

      // ===== Europe =====
      stuttgart: { 
        lat: 48.7758, 
        lng: 9.1829, 
        name: "Stuttgart", 
        date: "2024.09",
        description: "The automotive capital of Germany.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "media/stuttgart1.jpg", alt: "I was walking on the street" },
          { src: "media/stuttgart2.jpg", alt: "Fabulous!!!" }
        ]
      },
      amsterdam: { 
        lat: 52.3676, 
        lng: 4.9041, 
        name: "Amsterdam", 
        date: "2024.09",
        description: "The capital of the Netherlands.",
        timezone: "Europe/Amsterdam",
        photos: [
          { src: "media/amsterdam1.jpg", alt: "Sunset, vibe was chill" }
        ]
      },
      cologne: { 
        lat: 50.9375, 
        lng: 6.9603, 
        name: "Cologne", 
        date: "2024.07",
        description: "A historic city on the Rhine River.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "media/cologne1.jpg", alt: "Staring Cologne Cathedral on the balcony of the hotel" },
          { src: "media/cologne2.jpg", alt: "Inside the Cathedral" }
        ]
      },
      dusseldorf: { 
        lat: 51.2277, 
        lng: 6.7735, 
        name: "DÃ¼sseldorf", 
        date: "2024.02",
        description: "A major business and fashion center.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "media/dusseldorf1.jpg", alt: "Days short nights long" }
        ]
      },
      heidelberg: { 
        lat: 49.4033, 
        lng: 8.6757, 
        name: "Heidelberg", 
        date: "2025.08",
        description: "Alt und schÃ¶n",
        timezone: "Europe/Berlin",
        photos: [
          { src: "media/heidelberg1.jpg", alt: "Altstadt vom Philosophenweg" }
        ]
      },
      badenBaden: { 
        lat: 48.7610, 
        lng: 8.2399, 
        name: "Baden-Baden", 
        date: "2025.08",
        description: "A spa town known for its thermal baths.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "media/badenbaden1.jpg", alt: "Parachuting on the sky" }
        ]
      },
      mannheim: { 
        lat: 49.4848, 
        lng: 8.4732, 
        name: "Mannheim", 
        date: "2025.08",
        description: "xxx",
        timezone: "Europe/Berlin",
        photos: [
          { src: "media/mannheim1.jpg", alt: "xxx" }
        ]
      },
      munich: { 
        lat: 48.1371, 
        lng: 11.5770, 
        name: "Munich", 
        date: "2025.08",
        description: "The capital of Bavaria",
        timezone: "Europe/Berlin",
        photos: [
          { src: "media/munich1.jpg", alt: "Marienplatz" },
          { src: "media/munich2.jpg", alt: "BMW Museum" }
        ]
      },
      grossglockner: { 
        lat: 47.0742, 
        lng: 12.6947, 
        name: "Grossglockner", 
        date: "2025.08",
        description: "Austria's highest mountain.",
        timezone: "Europe/Vienna",
        photos: [
          { src: "media/groÃŸglockner1.jpg", alt: "At the top of Austria" }
        ]
      },
      paris:{
        lat: 48.8576,
        lng: 2.3615,
        name: "Paris",
        date: "2025.08",
        description: "The capital of France.",
        timezone: "Europe/Paris",
        photos: [
          { src: "media/paris1.jpg", alt: "Tour Eiffel" },
          { src: "media/paris2.jpg", alt: "Arc de Triomphe" }
        ]
      },
      innsbruck:{
        lat: 47.2675,
        lng: 11.3901,
        name: "Innsbruck",
        date: "2025.08",
        description: "The capital of Tyrol in western Austria.",
        timezone: "Europe/Vienna",
        photos: [
          { src: "media/innsbruck1.jpg", alt: "xxx" }
        ]
      },

      // ===== East Asia =====
      tokyo: {
        lat: 35.6796,
        lng: 139.7685,
        name: "Tokyo",
        date: "2024.12",
        description: "Japan's capital and largest city.",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/tokyo1.jpg", alt: "Finally saw this tower" },
          { src: "media/tokyo2.jpg", alt: "Shibuya Crossing" }
        ]
      },
      osaka: {
        lat: 34.6937,
        lng: 135.5023,
        name: "Osaka",
        date: "2024.12",
        description: "Japan's second-largest city.",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/osaka1.jpg", alt: "Stone Lion sent by Chinese Government" },
          { src: "media/osaka2.jpg", alt: "Universal Studios Japan" }
        ]
      },
      kyoto: {
        lat: 35.0109,
        lng: 135.7669,
        name: "Kyoto",
        date: "2024.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/kyoto1.jpg", alt: "xxx" }, //
          { src: "media/kyoto2.jpg", alt: "xxx" } //
        ]
      },
      fuji: {
        lat: 35.1614,
        lng: 138.6766,
        name: "Fuji",
        date: "2024.12",
        description: "The iconic symbol of Japan.",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/fuji1.jpg", alt: "xxx" } //
        ]
      },
      kamakura: {
        lat: 35.3177,
        lng: 139.5508,
        name: "Kamakura",
        date: "2024.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/kamakura1.jpg", alt: "xxx" }, //
          { src: "media/kamakura2.jpg", alt: "xxx" } //
        ]
      },
      yokohama: {
        lat: 35.4438,
        lng: 139.6375,
        name: "Yokohama",
        date: "2024.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/yokohama1.jpg", alt: "xxx" } //
        ]
      },
      fukuoka: {
        lat: 33.5904,
        lng: 130.4017,
        name: "Fukuoka",
        date: "2025.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/fukuoka1.jpg", alt: "xxx" } //
        ]
      },
      kitakyushu: {
        lat: 33.8833,
        lng: 130.8750,
        name: "Kitakyushu",
        date: "2025.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/kitakyushu1.jpg", alt: "xxx" } //
        ]
      },
      shimonoseki: {
        lat: 33.9570,
        lng: 130.9417,
        name: "Shimonoseki",
        date: "2025.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "media/shimonoseki1.jpg", alt: "xxx" } //
        ]
      },
      seoul: {
        lat: 37.5665,
        lng: 126.9780,
        name: "Seoul",
        date: "2025.12",
        description: "The capital of South Korea.",
        timezone: "Asia/Seoul",
        photos: [
          { src: "media/seoul1.jpg", alt: "xxx" } //
        ]
      },
      busan: {
        lat: 35.1796,
        lng: 129.0756,
        name: "Busan",
        date: "2025.12",
        description: "xxx",
        timezone: "Asia/Seoul",
        photos: [
          { src: "media/busan1.jpg", alt: "xxx" } //
        ]
      },

      // ===== West Asia =====
      dubai: { 
        lat: 25.2048, 
        lng: 55.2708, 
        name: "Dubai", 
        date: "2024.02",
        description: "A city of architectural wonders.",
        timezone: "Asia/Dubai",
        photos: [
          { src: "media/dubai1.jpg", alt: "Dazzling and impressive in this desert" },
          { src: "media/dubai2.jpg", alt: "Burj Al Arab" }
        ]
      },
      doha: { 
        lat: 25.2875, 
        lng: 51.5327, 
        name: "Doha", 
        date: "2025.08",
        description: "The capital of Qatar.",
        timezone: "Asia/Qatar",
        photos: [
          { src: "media/doha1.jpg", alt: "The Museum of Islamic Art" },
          { src: "media/doha2.jpg", alt: "Skyline of Doha" }
        ]
      },

      // ===== China =====
      // Shanghai Municipality
      shanghai: { 
        lat: 31.23157, 
        lng: 121.48452, 
        name: "Shanghai", 
        date: "2026.01",
        description: "China's largest city and financial center.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/shanghai1.jpg", alt: "Best of Lujiazui" }
        ]
      },
      // Beijing Municipality
      beijing: { 
        lat: 39.90871, 
        lng: 116.39748, 
        name: "Beijing", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/beijing1.jpg", alt: "xxx" } //
        ]
      },
      // Taiwan
      taipei: { 
        lat: 25.03373, 
        lng: 121.56407, 
        name: "Taipei", 
        date: "2025.01",
        description: "The capital city of Taiwan.",
        timezone: "Asia/Taipei",
        photos: [
          { src: "media/taipei1.jpg", alt: "101" }
        ]
      },
      kaohsiung: { 
        lat: 22.62791, 
        lng: 120.30123, 
        name: "Kaohsiung", 
        date: "2025.01",
        description: "xxx",
        timezone: "Asia/Taipei",
        photos: [
          { src: "media/kaohsiung1.jpg", alt: "xxx" }, //
          { src: "media/kaohsiung2.jpg", alt: "xxx" } //
        ]
      },
      // Macau SAR
      macau: { 
        lat: 22.19924, 
        lng: 113.54281, 
        name: "Macau", 
        date: "2025.07",
        description: "Won 500 hkd in the casino.",
        timezone: "Asia/Macau",
        photos: [
          { src: "media/macau1.jpg", alt: "You know it" }
        ]
      },
      // Guangdong Province
      shenzhen: { 
        lat: 22.54274, 
        lng: 114.05869, 
        name: "Shenzhen", 
        date: "Go Frequently",
        description: "A major tech and manufacturing hub.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/shenzhen1.jpg", alt: "Sea World" },
          { src: "media/shenzhen2.jpg", alt: "Ping An Finance Centre" }
        ]
      },
      guangzhou: { 
        lat: 23.10614, 
        lng: 113.32434, 
        name: "Guangzhou", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/guangzhou1.jpg", alt: "xxx" } //
        ]
      },
      // Chongqing Municipality
      chongqing: { 
        lat: 29.55669, 
        lng: 106.57748, 
        name: "Chongqing", 
        date: "2023.12",
        description: "I like the hotpot there.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/chongqing1.jpg", alt: "Even I think Hongya Cave is amazing" }
        ]
      },
      // Hunan Province
      changsha: { 
        lat: 28.19534, 
        lng: 112.97728, 
        name: "Changsha", 
        date: "2026.01",
        description: "My hometown!!!",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/changsha1.jpg", alt: "Autumn-Admiring Pavilion" },
          { src: "media/changsha2.jpg", alt: "Young Mao Zedong statue on the Orange Isle" }
        ]
      },
      zhangjiajie: { 
        lat: 29.11625, 
        lng: 110.47723, 
        name: "Zhangjiajie", 
        date: "201x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/zhangjiajie1.jpg", alt: "xxx" } //
        ]
      },
      yueyang: { 
        lat: 29.37220, 
        lng: 113.12252, 
        name: "Yueyang", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/yueyang1.jpg", alt: "xxx" } //
        ]
      },
      shaoyang: { 
        lat: 27.23873, 
        lng: 111.46756, 
        name: "Shaoyang", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/shaoyang1.jpg", alt: "xxx" } //
        ]
      },
      // Fujian Province
      xiamen: { 
        lat: 24.47881, 
        lng: 118.08863,
        name: "Xiamen", 
        date: "2023.07",
        description: "Comfortable and beautiful.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/xiamen1.jpg", alt: "so relaxing, so chilling" },
          { src: "media/xiamen2.jpg", alt: "Twin Towers of Xiamen" }
        ]
      },
      // Sichuan Province
      chengdu: { 
        lat: 30.65855, 
        lng: 104.06601, 
        name: "Chengdu", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/chengdu1.jpg", alt: "xxx" } //
        ]
      },
      // Zhejiang Province
      hangzhou: { 
        lat: 30.27248, 
        lng: 120.15626, 
        name: "Hangzhou", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/hangzhou1.jpg", alt: "xxx" } //
        ]
      },
      suzhou: { 
        lat: 31.29864, 
        lng: 120.58222, 
        name: "Suzhou", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/suzhou1.jpg", alt: "xxx" } //
        ]
      },
      //Shannxi Province
      xian: { 
        lat: 34.26574, 
        lng: 108.95414, 
        name: "Xi'an", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/xian1.jpg", alt: "xxx" } //
        ]
      },
      //Shandong Province
      qingdao: { 
        lat: 36.0671, 
        lng: 120.3826, 
        name: "Qingdao", 
        date: "2025.12",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/qingdao1.jpg", alt: "xxx" } //
        ]
      },
      yantai: { 
        lat: 37.46191, 
        lng: 121.44703, 
        name: "Yantai", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/yantai1.jpg", alt: "xxx" } //
        ]
      },
      weihai: { 
        lat: 37.51341, 
        lng: 122.12179, 
        name: "Weihai", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/weihai1.jpg", alt: "xxx" } //
        ]
      },
      taian: {
        lat: 36.19962, 
        lng: 117.08926, 
        name: "Taian", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "media/taian1.jpg", alt: "xxx" } //
        ]
      },


      // ===== Current Base =====
      // Hong Kong SAR
      hongKong: { 
        lat: 22.29481, 
        lng: 114.17341, 
        name: "Hong Kong", 
        date: "Current Base",
        description: "The vibrant city where I currently live and study, combining modern architecture with rich cultural heritage.",
        timezone: "Asia/Hong_Kong",
        photos: [
          { src: "media/hongkong1.jpg", alt: "From the roof of my home" },
          { src: "media/hongkong2.jpg", alt: "View of Kowloon from Hong Kong Island" },
          { src: "media/hongkong3.jpg", alt: "The Peak" },
          { src: "media/hongkong4.jpg", alt: "Happy 2025 Mid-Autumn Festival!" }
        ]
      }
    };

    // Function to update city times
    function updateCityTimes() {
      Object.entries(cities).forEach(([id, city]) => {
        const timeElement = document.getElementById(`${id}-time`);
        if (timeElement) {
          const time = new Date().toLocaleTimeString('en-US', {
            timeZone: city.timezone,
            hour12: true,
            hour: 'numeric',
            minute: '2-digit'
          });
          timeElement.textContent = `Current Time: ${time}`;
        }
      });
    }

    function initMap() {
      if (map) return;

      const container = document.getElementById('Map');
      if (!container) return;

      // Initialize 3D Globe
      const primaryColor = getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim() || '#1a365d';
      
      // Convert cities to points data first
      const pointsData = Object.entries(cities).map(([id, city]) => ({
        id: id,
        lat: city.lat,
        lng: city.lng,
        color: primaryColor,
        name: city.name,
        date: city.date,
        timezone: city.timezone
      }));

      console.log('Cities data:', pointsData); // Debug

      map = Globe()(container)
        .globeImageUrl('//unpkg.com/three-globe/example/img/earth-day.jpg')
        .bumpImageUrl('//unpkg.com/three-globe/example/img/earth-topology.png')
        .backgroundColor('rgba(0,0,0,0)')
        .width(Math.min(container.offsetWidth, 700))
        .height(600)
        .pointOfView({ lat: 30, lng: 0, altitude: 2.5 })
        .showAtmosphere(true)
        .atmosphereColor('#6495ED')
        .atmosphereAltitude(0.15)
        .htmlElementsData(pointsData)
        .htmlLat('lat')
        .htmlLng('lng')
        .htmlAltitude(0)
        .htmlElement(d => {
          const el = document.createElement('div');
          el.style.cssText = `
            position: relative;
            width: 20px;
            height: 20px;
            cursor: pointer;
            pointer-events: auto;
            transform: translate(-50%, -100%);
          `;
          
          const pin = document.createElement('div');
          pin.style.cssText = `
            position: absolute;
            top: 0;
            left: 50%;
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, ${primaryColor} 0%, #2563eb 100%);
            border: 2.5px solid white;
            border-radius: 50% 50% 50% 0;
            transform: translateX(-50%) rotate(-45deg);
            box-shadow: 0 2px 6px rgba(0,0,0,0.4), 0 0 0 1.5px rgba(26,54,93,0.15);
            transition: all 0.3s ease;
          `;
          
          el.appendChild(pin);
          
          // Hover effect
          el.addEventListener('mouseenter', () => {
            pin.style.transform = 'translateX(-50%) rotate(-45deg) scale(1.25)';
            pin.style.boxShadow = '0 4px 12px rgba(0,0,0,0.5), 0 0 0 2px rgba(26,54,93,0.25)';
          });
          
          el.addEventListener('mouseleave', () => {
            pin.style.transform = 'translateX(-50%) rotate(-45deg) scale(1)';
            pin.style.boxShadow = '0 2px 6px rgba(0,0,0,0.4), 0 0 0 1.5px rgba(26,54,93,0.15)';
          });
          
          // Click event
          el.addEventListener('click', (e) => {
            e.stopPropagation();
            console.log('Pin clicked:', d.name);
            showCityInfo(d.id);
            map.pointOfView({ lat: d.lat, lng: d.lng, altitude: 1.5 }, 1000);
          });
          
          // Tooltip
          el.title = `${d.name}\nLast visited: ${d.date}\nClick to view photos`;
          
          return el;
        });

      console.log('Pin markers configuration complete, marker count:', pointsData.length);

      // Add toggle button after globe is created
      let toggleBtn = container.querySelector('.map-toggle-btn');
      if (!toggleBtn) {
        toggleBtn = document.createElement('button');
        toggleBtn.className = 'map-toggle-btn';
        toggleBtn.onclick = toggleMapMode;
        toggleBtn.innerHTML = '<i class="fas fa-globe"></i><span id="mapModeText">Switch to 2D</span>';
        container.appendChild(toggleBtn);
      }

      // Add auto-rotation
      map.controls().autoRotate = true;
      map.controls().autoRotateSpeed = 0.3;
      map.controls().enableZoom = true;
      map.controls().minDistance = 260;
      map.controls().maxDistance = 500;

      // Pause rotation on interaction
      map.controls().addEventListener('start', () => {
        map.controls().autoRotate = false;
      });

      // Resume rotation after 3 seconds of inactivity
      let rotationTimeout;
      map.controls().addEventListener('end', () => {
        clearTimeout(rotationTimeout);
        rotationTimeout = setTimeout(() => {
          map.controls().autoRotate = true;
        }, 3000);
      });

      // Handle window resize
      window.addEventListener('resize', () => {
        if (map && container) {
          map.width(Math.min(container.offsetWidth, 700));
        }
      });
    }

    // 2D Map initialization
    let map2D = null;
    let map2DMarkers = [];
    
    function init2DMap() {
      const container = document.getElementById('Map');
      if (!container || map2D) return;

      // Clear container but keep toggle button
      const existingBtn = container.querySelector('.map-toggle-btn');
      container.innerHTML = '';
      
      // Re-add toggle button
      const toggleBtn = document.createElement('button');
      toggleBtn.className = 'map-toggle-btn';
      toggleBtn.onclick = toggleMapMode;
      toggleBtn.innerHTML = '<i class="fas fa-cube"></i><span id="mapModeText">Switch to 3D</span>';
      container.appendChild(toggleBtn);

      // Initialize Leaflet map
      map2D = L.map(container, {
        center: [30, 0],
        zoom: 2,
        minZoom: 2,
        maxZoom: 18,
        zoomControl: true,
        maxBounds: [[-90, -180], [90, 180]],
        maxBoundsViscosity: 1.0
      });

      // Add tile layer
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 19,
        noWrap: true
      }).addTo(map2D);

      // Custom marker icon - simplified for accurate positioning
      const customIcon = L.divIcon({
        className: 'custom-marker',
        html: `<div style="
          width: 18px;
          height: 18px;
          background: linear-gradient(135deg, #1a365d 0%, #2563eb 100%);
          border: 2.5px solid white;
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          box-shadow: 0 2px 6px rgba(0,0,0,0.4), 0 0 0 1.5px rgba(26,54,93,0.15);
        "></div>`,
        iconSize: [18, 18],
        iconAnchor: [9, 18]
      });

      // Add markers for all cities
      map2DMarkers = [];
      Object.entries(cities).forEach(([id, city]) => {
        const marker = L.marker([city.lat, city.lng], { 
          icon: customIcon,
          title: `${city.name}\nLast visited: ${city.date}\nClick to view photos`
        }).addTo(map2D);
        
        // Create popup content with current time
        const getPopupContent = () => {
          const currentTime = new Date().toLocaleTimeString('en-US', {
            timeZone: city.timezone,
            hour12: true,
            hour: 'numeric',
            minute: '2-digit'
          });
          return `
            <div class="map-popup">
              <h3>${city.name}</h3>
              <p>Last visited: ${city.date}</p>
              <p id="popup-time-${id}">Current Time: ${currentTime}</p>
            </div>
          `;
        };
        
        // Bind popup
        marker.bindPopup(getPopupContent(), {
          maxWidth: 250,
          className: 'custom-popup'
        });
        
        // Update time when popup opens
        marker.on('popupopen', () => {
          const updatePopupTime = () => {
            const timeElement = document.getElementById(`popup-time-${id}`);
            if (timeElement) {
              const currentTime = new Date().toLocaleTimeString('en-US', {
                timeZone: city.timezone,
                hour12: true,
                hour: 'numeric',
                minute: '2-digit'
              });
              timeElement.textContent = `Current Time: ${currentTime}`;
            }
          };
          // Update immediately and then every second
          updatePopupTime();
          marker._popupTimeInterval = setInterval(updatePopupTime, 1000);
        });
        
        // Clear interval when popup closes
        marker.on('popupclose', () => {
          if (marker._popupTimeInterval) {
            clearInterval(marker._popupTimeInterval);
            marker._popupTimeInterval = null;
          }
        });
        
        // Also show city info below map on click
        marker.on('click', () => {
          showCityInfo(id);
          map2D.setView([city.lat, city.lng], 8, { animate: true });
        });
        
        map2DMarkers.push(marker);
      });

      // Fix map rendering
      setTimeout(() => {
        map2D.invalidateSize();
      }, 100);
    }

    // Toggle between 2D and 3D maps
    let currentMapMode = '3d'; // Start with 3D
    
    function toggleMapMode() {
      const container = document.getElementById('Map');
      const modeText = document.getElementById('mapModeText');
      
      if (currentMapMode === '3d') {
        // Switch to 2D
        currentMapMode = '2d';
        container.classList.remove('map-3d');
        container.classList.add('map-2d');
        
        // Clear 3D globe
        if (map) {
          map = null;
        }
        
        // Initialize 2D map
        init2DMap();
        
      } else {
        // Switch to 3D
        currentMapMode = '3d';
        container.classList.remove('map-2d');
        container.classList.add('map-3d');
        
        // Clear 2D map
        if (map2D) {
          map2D.remove();
          map2D = null;
          map2DMarkers = [];
        }
        
        // Clear container
        container.innerHTML = '';
        
        // Initialize 3D globe (button will be added in initMap)
        initMap();
      }
    }

    // Update showCityInfo function to handle photos and add click listeners
    function showCityInfo(cityId) {
      document.querySelectorAll('.city-info').forEach(info => {
        info.classList.remove('active');
      });

      const cityInfo = document.getElementById(cityId);
      if (cityInfo) {
        // Update description from JavaScript data
        const description = cityInfo.querySelector('.city-description');
        if (description && cities[cityId]) {
          description.textContent = cities[cityId].description;
        }

        // Update photos from JavaScript data
        const gallery = cityInfo.querySelector('.city-gallery');
        if (gallery && cities[cityId] && cities[cityId].photos) {
          // Add gallery header if not exists
          let galleryHeader = cityInfo.querySelector('.gallery-header');
          if (!galleryHeader) {
            galleryHeader = document.createElement('div');
            galleryHeader.className = 'gallery-header';
            galleryHeader.innerHTML = `
              <div class="gallery-title">
                <i class="fas fa-images"></i>
                <span>Photo Gallery</span>
              </div>
              <div class="photo-count">${cities[cityId].photos.length} ${cities[cityId].photos.length === 1 ? 'Photo' : 'Photos'}</div>
            `;
            gallery.parentNode.insertBefore(galleryHeader, gallery);
          } else {
            // Update photo count
            const photoCount = galleryHeader.querySelector('.photo-count');
            if (photoCount) {
              photoCount.textContent = `${cities[cityId].photos.length} ${cities[cityId].photos.length === 1 ? 'Photo' : 'Photos'}`;
            }
          }

          // Generate gallery items with overlay
          gallery.innerHTML = cities[cityId].photos.map(photo => `
            <div class="gallery-item">
              <img src="${photo.src}" alt="${photo.alt}" class="gallery-image">
              <div class="gallery-item-overlay">
                <div class="gallery-item-caption">${photo.alt}</div>
                <i class="fas fa-search-plus gallery-item-icon"></i>
              </div>
            </div>
          `).join('');

          // Add click listeners to the gallery items
          const items = gallery.querySelectorAll('.gallery-item');
          items.forEach(item => {
            item.addEventListener('click', function() {
              const img = this.querySelector('img');
              const modal = document.getElementById("photoModal");
              const modalImg = document.getElementById("modalImage");
              const captionText = document.getElementById("caption");
              if (modal && modalImg && captionText && img) {
                modal.style.display = "block";
                modalImg.src = img.src;
                captionText.innerHTML = img.alt;
              }
            });
          });
        }
        
        cityInfo.classList.add('active');
        cityInfo.scrollIntoView({ 
          behavior: 'smooth',
          block: 'start'
        });
      }
    }

    // Globe doesn't need time updates (handled in tooltips)

    // Initialize descriptions and photos with click listeners when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize map when photograph section is shown
      const photographLink = document.querySelector('[data-section="photograph"]');
      if (photographLink) {
        photographLink.addEventListener('click', () => {
          setTimeout(() => {
            initMap();
          }, 100);
        });
      }

      Object.entries(cities).forEach(([id, city]) => {
        // Update description
        const description = document.querySelector(`#${id} .city-description`);
        if (description) {
          description.textContent = city.description;
        }

        // Update photos
        const cityInfoElement = document.getElementById(id);
        const gallery = document.querySelector(`#${id}-gallery`);
        
        if (gallery && city.photos) {
          // Add gallery header
          let galleryHeader = document.querySelector(`#${id} .gallery-header`);
          if (!galleryHeader) {
            galleryHeader = document.createElement('div');
            galleryHeader.className = 'gallery-header';
            galleryHeader.innerHTML = `
              <div class="gallery-title">
                <i class="fas fa-images"></i>
                <span>Photo Gallery</span>
              </div>
              <div class="photo-count">${city.photos.length} ${city.photos.length === 1 ? 'Photo' : 'Photos'}</div>
            `;
            gallery.parentNode.insertBefore(galleryHeader, gallery);
          }

          // Generate gallery items
          gallery.innerHTML = city.photos.map(photo => `
            <div class="gallery-item">
              <img src="${photo.src}" alt="${photo.alt}" class="gallery-image">
              <div class="gallery-item-overlay">
                <div class="gallery-item-caption">${photo.alt}</div>
                <i class="fas fa-search-plus gallery-item-icon"></i>
              </div>
            </div>
          `).join('');

          const items = gallery.querySelectorAll('.gallery-item');
          items.forEach(item => {
            item.addEventListener('click', function() {
              const img = this.querySelector('img');
              const modal = document.getElementById("photoModal");
              const modalImg = document.getElementById("modalImage");
              const captionText = document.getElementById("caption");
              if (modal && modalImg && captionText && img) {
                modal.style.display = "block";
                modalImg.src = img.src;
                captionText.innerHTML = img.alt;
              }
            });
          });
        }
      });

      // Get the modal element
      const modal = document.getElementById("photoModal");
      const modalImg = document.getElementById("modalImage");
      const caption = document.getElementById("caption");
      const closeBtn = document.getElementById("closeModalBtn");

      if (modal) {
        modal.addEventListener('click', function(event) {
          if (event.target === modal) {
            modal.style.display = "none";
          }
        });
      }
      if (modalImg) {
        modalImg.addEventListener('click', function(event) {
          event.stopPropagation();
        });
      }
      if (caption) {
        caption.addEventListener('click', function(event) {
          event.stopPropagation();
        });
      }
      if (closeBtn) {
        closeBtn.addEventListener('click', function(event) {
          console.log('Close button clicked');
          if (modal) {
            console.log('Setting modal display to none');
            modal.style.display = "none";
          }
          event.stopPropagation();
        });
      }
    });
  </script>

  <!-- Photo Modal -->
  <div id="photoModal" class="modal">
    <span id="closeModalBtn" style="position:absolute;top:20px;right:35px;font-size:40px;font-weight:bold;color:#fff;cursor:pointer;z-index:2100;">&times;</span>
    <img class="modal-content" id="modalImage">
    <div id="caption"></div>
  </div>
</body>
</html>
