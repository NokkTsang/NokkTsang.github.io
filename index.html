<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Baichuan ZENG - Portfolio</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #0d3da5bc;
      --text-color: #333;
      --light-grey: #f4f6f8; /* Slightly lighter for sidebar background */
      --border-color: #ddd;
      --background-color: #e9ecef; /* Main page background */
      --white-color: #fff;
      --link-color: #206ea1;
      --hover-link-color: #15ac8e; /* Teal for hover */

      --sidebar-width-desktop: 320px;
      --transition-speed: 0.4s;
      --card-shadow: 0 2px 4px rgba(0,0,0,0.05);
      --card-shadow-hover: 0 4px 8px rgba(0,0,0,0.1);

      --container-max-width: 1400px;
      --container-padding: 20px;
    }

    html {
      scroll-behavior: smooth;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Lato', Arial, sans-serif;
      line-height: 1.7;
      background-color: var(--background-color);
      color: var(--text-color);
      font-size: 16px;
    }

    .container {
      max-width: var(--container-max-width);
      margin: 0 auto;
      background-color: var(--white-color);
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      min-height: 100vh;
      position: relative;
    }

    .page-wrapper {
      display: flex;
      min-height: 100vh;
    }

    /* --- Sidebar --- */
    .sidebar {
      width: var(--sidebar-width-desktop);
      position: fixed; /* Fixed position */
      left: 0;
      top: 0;
      bottom: 0; /* Makes it full height */
      background-color: var(--light-grey);
      padding: 30px 25px;
      display: flex;
      flex-direction: column;
      align-items: center; /* Center items horizontally */
      text-align: center; /* Center text */
      overflow-y: auto; /* Scroll if sidebar content is too tall */
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      z-index: 1000; /* Increased z-index */
    }

    .sidebar .logo img {
      max-width: 150px; /* Adjust as needed */
      height: auto;
      margin-bottom: 25px;
    }

    .profile-photo {
      width: 220px; /* Larger photo width */
      height: auto; /* Maintain aspect ratio, or set a fixed height for specific rectangle */
      /* height: 280px; /* Example fixed height for a more portrait rectangle */
      border-radius: 8px; /* Rectangular with slightly rounded corners, set to 0 for sharp */
      object-fit: cover;
      border: 4px solid var(--white-color); /* White border to lift it */
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      margin-bottom: 20px;
    }

    .sidebar h1 {
      font-family: 'Roboto', sans-serif;
      font-size: 26px; /* Adjusted for sidebar */
      font-weight: 500;
      color: var(--primary-color);
      margin-top: 0;
      margin-bottom: 10px;
    }

    .sidebar .contact {
      font-size: 13px; /* Smaller for sidebar */
      color: #444; /* Slightly darker for readability */
      margin-bottom: 0;
      line-height: 1.6;
    }
    .sidebar .contact a {
      color: #444;
      text-decoration: none;
      display: block; /* Make each part of contact info on new line if needed */
      margin-bottom: 3px;
    }
    .sidebar .contact a:hover {
      color: var(--secondary-color);
      text-decoration: underline;
    }

    .social-links {
      margin-top: 20px;
      display: flex;
      gap: 20px;
      justify-content: center;
    }

    .social-links a {
      color: var(--primary-color);
      font-size: 20px;
      transition: all var(--transition-speed);
      opacity: 0.8;
    }

    .social-links a:hover {
      color: var(--secondary-color);
      opacity: 1;
      transform: translateY(-2px);
    }

    /* --- Main Content --- */
    .main-content {
      margin-left: var(--sidebar-width-desktop); /* Offset by sidebar width */
      flex-grow: 1; /* Takes remaining space */
      padding: 40px;
      background-color: var(--white-color);
      min-height: 100vh; /* Ensure it can fill screen if content is short */
      box-shadow: -3px 0 10px rgba(0,0,0,0.05); /* Subtle shadow from sidebar */
    }

    /* --- Section Styling (within main-content) --- */
    h2 {
      font-family: 'Roboto', sans-serif;
      font-size: 28px;
      font-weight: 500;
      color: var(--primary-color);
      margin-top: 0;
      margin-bottom: 25px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--secondary-color);
      display: inline-block;
    }

    h3 {
      font-family: 'Roboto', sans-serif;
      font-size: 20px;
      font-weight: 500;
      color: var(--primary-color);
      margin-top: 20px;
      margin-bottom: 15px;
    }

    section {
      margin-bottom: 40px;
      padding-bottom: 25px;
    }
    section:not(:last-child) {
        border-bottom: 1px solid var(--border-color);
    }

    ul {
      padding-left: 25px;
      list-style-type: none;
      margin-bottom: 15px;
    }

    li {
      margin-bottom: 12px;
      position: relative;
      padding-left: 20px;
    }

    li::before {
      content: "•";
      color: var(--secondary-color);
      position: absolute;
      left: 0;
      font-weight: bold;
    }

    .subsection {
      margin-bottom: 25px;
      padding-left: 15px;
      border-left: 1px solid var(--border-color);
    }
    .subsection strong {
        font-weight: 500;
    }
    .subsection strong a {
        font-weight: 500;
    }

    a {
      color: var(--link-color);
      text-decoration: none;
      transition: color 0.2s ease-in-out;
    }

    a:hover, a:focus {
      color: var(--hover-link-color);
      text-decoration: underline;
    }

    p {
        margin-bottom: 15px;
    }

    /* --- Responsive Design --- */
    @media (max-width: 1440px) {
      .container {
        max-width: 100%;
        margin: 0 var(--container-padding);
      }
    }

    @media (max-width: 992px) { /* Tablet and below - sidebar becomes static top bar */
      .page-wrapper {
        flex-direction: column; /* Stack sidebar (now header) and main content */
      }

      .sidebar {
        position: static; /* No longer fixed */
        width: 100%;
        height: auto; /* Auto height */
        bottom: auto; /* Reset bottom */
        flex-direction: column; /* Keep items stacked */
        align-items: center; /* Center items */
        padding: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Bottom shadow */
        z-index: auto;
      }

      .sidebar .logo img {
        max-width: 120px;
        margin-bottom: 15px;
      }

      .profile-photo {
        width: 150px; /* Adjust for mobile header */
        /* height: 180px; */ /* Example */
        margin-bottom: 15px;
      }

      .sidebar h1 {
        font-size: 22px;
        margin-bottom: 8px;
      }
      .sidebar .contact {
        font-size: 12px;
        display: flex; /* Try to keep contact info more compact */
        flex-wrap: wrap;
        justify-content: center;
      }
      .sidebar .contact a {
        margin: 0 5px; /* Space out contact links if they are side-by-side */
        display: inline;
      }


      .main-content {
        margin-left: 0; /* No offset needed */
        padding: 25px;
        box-shadow: none;
      }

      h2 {
        font-size: 24px;
      }
      h3 {
        font-size: 18px;
      }
    }

    @media (max-width: 480px) { /* Smaller mobile devices */
      body {
        font-size: 15px;
      }
      .main-content {
        padding: 20px 15px;
      }
      .sidebar {
        padding: 15px;
      }
      .profile-photo {
        width: 120px;
      }
      .sidebar h1 {
        font-size: 20px;
      }
       .sidebar .contact {
        flex-direction: column; /* Stack contact details fully on very small screens */
      }
      .sidebar .contact a {
        margin-bottom: 5px;
      }

      h2 {
        font-size: 22px;
        text-align: center;
        display: block;
      }
    }

    /* Back to Top Button */
    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background-color: var(--primary-color);
      color: white;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      opacity: 0;
      transition: all var(--transition-speed);
      z-index: 999; /* Adjusted z-index to be below nav but above other content */
      cursor: pointer;
      box-shadow: var(--card-shadow);
    }

    .back-to-top.visible {
      opacity: 0.8;
    }

    .back-to-top:hover {
      opacity: 1;
      transform: translateY(-3px);
      box-shadow: var(--card-shadow-hover);
    }

    /* Section Cards */
    .section-card {
      background: var(--white-color);
      border-radius: 4px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: var(--card-shadow);
      transition: box-shadow var(--transition-speed);
      border: 1px solid var(--border-color);
    }

    .section-card:hover {
      box-shadow: var(--card-shadow-hover);
    }

    /* Publication Item */
    .publication-item {
      padding: 20px;
      border-left: 2px solid var(--secondary-color);
      margin-bottom: 20px;
      transition: transform var(--transition-speed);
      background-color: var(--light-grey);
    }

    .publication-item:hover {
      transform: translateX(5px);
    }

    /* CV Download Button */
    .cv-button {
      display: inline-block;
      padding: 10px 20px;
      background-color: var(--secondary-color);
      color: white;
      text-decoration: none;
      border-radius: 5px;
      transition: background-color var(--transition-speed), transform var(--transition-speed);
      margin-top: 10px;
    }

    .cv-button:hover {
      background-color: var(--hover-link-color);
      transform: translateY(-2px);
    }

    /* Navigation Bar */
    .nav-bar {
      position: fixed;
      top: 0;
      left: var(--sidebar-width-desktop);
      right: 0;
      background-color: var(--white-color);
      padding: 15px 40px;
      display: flex;
      gap: 30px;
      box-shadow: var(--card-shadow);
      z-index: 1000; /* Increased z-index to match sidebar */
      border-bottom: 1px solid var(--border-color);
    }

    .nav-link {
      color: var(--primary-color);
      text-decoration: none;
      padding: 5px 0;
      position: relative;
      font-weight: 500;
      transition: color var(--transition-speed);
    }

    .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 0;
      background-color: var(--secondary-color);
      transition: width var(--transition-speed);
    }

    .nav-link:hover::after {
      width: 100%;
    }

    .nav-link.active {
      color: var(--secondary-color);
    }

    .nav-link.active::after {
      width: 100%;
    }

    /* Section Visibility */
    .section {
      display: none;
      opacity: 0;
      transition: opacity var(--transition-speed);
    }

    .section.active {
      display: block;
      opacity: 1;
    }

    /* Adjust main content for nav bar */
    .main-content {
      margin-top: 60px;
    }

    @media (max-width: 992px) {
      .nav-bar {
        left: 0;
        padding: 10px 20px;
      }
    }

    /* Map Styles */
    #Map {
      height: 500px;
      width: 100%;
      border-radius: 8px;
      margin-bottom: 25px;
      border: 1px solid var(--border-color);
      box-shadow: var(--card-shadow);
      z-index: 1; /* Lower z-index for map */
    }

    .map-container {
      position: relative;
      overflow: hidden;
      z-index: 1; /* Lower z-index for map container */
    }

    .city-info {
      padding: 25px;
      background: var(--white-color);
      border-radius: 8px;
      box-shadow: var(--card-shadow);
      margin-top: 25px;
      display: none;
      border: 1px solid var(--border-color);
    }

    .city-info.active {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }

    .city-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .city-header h3 {
      margin: 0;
      color: var(--primary-color);
    }

    .city-date {
      color: var(--secondary-color);
      font-size: 0.9em;
    }

    .city-time {
      font-size: 1.2em;
      color: var(--primary-color);
      margin: 10px 0;
      font-weight: 500;
    }

    .city-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .city-gallery img {
      width: 100%; /* Make image width adaptive to container */
      height: auto; /* Maintain aspect ratio */
      object-fit: cover; /* Cover the area, might crop */
      border-radius: 8px;
      transition: all var(--transition-speed);
      cursor: pointer;
      box-shadow: var(--card-shadow);
      max-width: 300px; /* Set a maximum width for images in the gallery */
    }

    .city-gallery img:hover {
      transform: scale(1.03);
      box-shadow: var(--card-shadow-hover);
    }

    .map-popup {
      font-family: 'Roboto', sans-serif;
      padding: 10px;
    }

    .map-popup h3 {
      margin: 0 0 5px 0;
      color: var(--primary-color);
      font-size: 16px;
    }

    .map-popup p {
      margin: 0;
      color: var(--text-color);
      font-size: 14px;
    }

    .map-popup .city-time {
      font-size: 14px;
      margin: 5px 0;
    }

    .custom-popup .leaflet-popup-content-wrapper {
      background: var(--white-color);
      border-radius: 8px;
      box-shadow: var(--card-shadow);
    }

    .custom-popup .leaflet-popup-tip {
      background: var(--white-color);
    }

    .custom-marker {
      background: var(--secondary-color);
      border: 2px solid white;
      border-radius: 50%;
      box-shadow: var(--card-shadow);
    }

    .terminator {
      fill: rgba(0, 0, 0, 0.4);
      stroke: rgba(0, 0, 0, 0.5);
      stroke-width: 1.5;
      transition: fill 0.5s ease-in-out;
    }

    .twilight {
      fill: rgba(0, 0, 0, 0.2);
      transition: fill 0.5s ease-in-out;
    }

    .terminator-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Photo Modal Styles */
    .modal {
      display: none !important; /* Hidden by default, force hidden */
      position: fixed; /* Stay in place */
      z-index: 2000; /* Sit on top */
      padding-top: 60px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
    }

    .modal[style*="display: block"] {
      display: block !important;
    }

    .modal-content {
      margin: auto;
      display: block;
      max-width: 90%;
      max-height: 80%; /* Adjust based on padding-top */
    }

    #caption {
      margin: auto;
      display: block;
      width: 90%;
      max-width: 700px;
      text-align: center;
      color: #ccc;
      padding: 10px 0;
      height: 150px; /* Give some space for caption */
    }

    /* Add Animation */
    .modal-content, #caption {
      animation-name: zoom;
      animation-duration: 0.6s;
    }

    @keyframes zoom {
      from {transform: scale(0.1)} 
      to {transform: scale(1)}
    }

    /* 100% Image Width on Smaller Screens */
    @media only screen and (max-width: 700px){
      .modal-content {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="page-wrapper">
      <aside class="sidebar">
        <div class="logo">
          <a href="https://www.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">
            <img src="pictures/cuhk-logo.PNG" alt="CUHK Logo">
          </a>
        </div>
        <img src="pictures/me_dubai.jpg" alt="Baichuan ZENG" class="profile-photo">
        <h1>TSANG Baak Cyun(曾百川), Nokk</h1>
        <div class="contact">
          <a href="javascript:void(0)" onclick="copyPhoneNumber()" id="phoneLink">Tel: +852-68502154</a>
          <a href="javascript:void(0)" onclick="copyEmail('baichuan@link.cuhk.edu.hk', 'schoolEmailLink')" id="schoolEmailLink">School: baichuan@link.cuhk.edu.hk</a>
          <a href="javascript:void(0)" onclick="copyEmail('zbc2385505079@gmail.com', 'privateEmailLink')" id="privateEmailLink">Personal: zbc2385505079@gmail.com</a>
          <div class="social-links">
            <a href="https://github.com/NokkTsang" target="_blank" rel="noopener noreferrer" title="GitHub"><i class="fab fa-github"></i></a>
            <a href="https://www.linkedin.com/in/nokk-tsang-zbc68502154/" target="_blank" rel="noopener noreferrer" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
            <a href="https://www.instagram.com/zzeb_n/" target="_blank" rel="noopener noreferrer" title="Instagram"><i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </aside>

      <nav class="nav-bar">
        <a href="#home" class="nav-link active" data-section="home">Home</a>
        <a href="#publications" class="nav-link" data-section="publications">Publications</a>
        <a href="#cv" class="nav-link" data-section="cv">CV</a>
        <a href="#photograph" class="nav-link" data-section="photograph">Photograph</a>
      </nav>

      <main class="main-content">
        <section id="home" class="section active">
          <div class="section-card">
            <h2>General Introduction</h2>
            <p>
              As a penultimate UG student passionate about AI agents and 3D Vision, I am currently involved in two key projects: Machine Learning for Molecular Prediction: training models to predict inhibitors of Tdp1, contributing to drug discovery with members from the Faculty of Medicine of CUHK; Computer Vision for Spatial Understanding: the final year project under <a href="https://www.cse.cuhk.edu.hk/~cwfu/" target="_blank" rel="noopener noreferrer">Prof. Chi-Wing FU, Philip</a>, focusing on mixed reality for surgical navigation and training. I am particularly interested in how intelligent agents can be integrated into the exploration of the physical and digital world.
            </p>
          </div>

          <div class="section-card">
            <h2>Education</h2>
            <div class="subsection">
              <h3><a href="https://www.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">The Chinese University of Hong Kong</a>, Hong Kong SAR</h3>
              <p>
                B.Sc. in Computer Science (2022/09–2026/07) [Anticipated]<br/>
                - Area of interest: AI, ML, Computer Vision, Robotics, Mixed Reality, Embodied Intelligence<br/>
                - College: <a href="https://www.shho.cuhk.edu.hk/" target="_blank" rel="noopener noreferrer">S.H. HO College</a> | Advisor: <a href="https://www.cse.cuhk.edu.hk/~taoyf/" target="_blank" rel="noopener noreferrer">Prof. Yu-Fei TAO</a>
              </p>
            </div>
            <div class="subsection">
              <h3><a href="https://www.uni-heidelberg.de/de" target="_blank" rel="noopener noreferrer">Heidelberg University</a>, Heidelberg, Germany</h3>
              <p>International Summer School (2025/08)</p>
            </div>
            <div class="subsection">
              <h3><a href="https://www.heungto.edu.hk/" target="_blank" rel="noopener noreferrer">Heung To Middle School</a>, Hong Kong SAR</h3>
              <p>Secondary Education (2018/09–2022/07)</p>
            </div>
          </div>

          <div class="section-card">
            <h2>Academic Achievements</h2>
            <ul>
              <li><strong>ELITE Stream Student</strong>, Faculty of Engineering, CUHK (2022/09–2024/12)</li>
              <li><strong>Best Performance, Individual Winner</strong>, Hong Kong Mathematics Olympiad (2021/07): Full-mark in Paper Two</li>
              <li><strong>Third Honor Award</strong>, Hong Kong Physics Olympiad (2020/08)</li>
            </ul>
          </div>

          <div class="section-card">
            <h2>Research Experience</h2>
            <div class="subsection">
              <h3>Participant, Online Program in Computer Vision in Robotics</h3>
              <p>
                - Advised by <a href="https://guangmingw.github.io/" target="_blank" rel="noopener noreferrer">Dr. Guangming Wang</a>, University of Cambridge<br/>
                - Completed a review paper: <a href="https://arxiv.org/abs/2504.15970" target="_blank" rel="noopener noreferrer">Recent Advances and Future Directions in Extended Reality (XR): Exploring AI-Powered Spatial Intelligence</a> as the project
              </p>
            </div>
            <div class="subsection">
              <h3>Summer Research, <a href="https://en.sjtu.edu.cn/" target="_blank" rel="noopener noreferrer">Shanghai Jiao Tong University</a> (2023/07–2023/08)</h3>
              <p>
                - Advised by <a href="https://soo.sjtu.edu.cn/en/teacher-list/zengzheng.html" target="_blank" rel="noopener noreferrer">Prof. Zheng Zeng</a><br/>
                - Worked on Morphing Hybrid Aerial-Underwater vehicle<br/>
                - Conducted outdoor experiments, data analysis, and contributed to paper writing
              </p>
            </div>
          </div>

          <div class="section-card">
            <h2>Technical Skills</h2>
            <ul>
              <li>Programming: C/C++/C#, Java, Python, SQL, HTML, JavaScript</li>
              <li>Tools: PyTorch, Unity, OpenCV, ROS, Blender</li>
              <li>Algorithm Design, Database Admin, Project Management, Model Training, Software Development, Technical Writing, 3D Modeling</li>
            </ul>
          </div>

          <div class="section-card">
            <h2>Language Proficiency</h2>
            <ul>
              <li>English</li>
              <li>Mandarin</li>
              <li>Cantonese</li>
              <li>German</li>
            </ul>
          </div>

          <div class="section-card">
            <h2>Related Courses</h2>
            <ul>
              <li>Data Structures</li>
              <li>Computer Organization & Design</li>
              <li>Intro to Operating Systems</li>
              <li>Intro to Database Systems</li>
              <li>Design & Analysis of Algorithms</li>
              <li>Formal Languages & Automata Theory</li>
              <li>Fundamentals of Machine Learning</li>
              <li>Software Engineering</li>
            </ul>
          </div>

          <div class="section-card">
            <h2>Extra-Curricular Activities</h2>
            <ul>
              <li>Exhibitor, Dental South China International Expo, Guangzhou (2024/03)</li>
              <li>Member, SHHO College Table Tennis Team (2023/09–Current)</li>
              <li>Member, SHHO College Basketball Team (2022/07–2024/06)</li>
            </ul>
          </div>
        </section>

        <section id="publications" class="section">
          <div class="section-card">
            <h2>Publications</h2>
            <div class="publication-item">
              <h3>Cognitive UAV Tracking: Leveraging DRL and Hybrid Curriculum Learning for Target Reacquisition</h3>
              <p>IEEE Transactions on Automation Science and Engineering (TASE)</p>
              <p>Accepted: June 2025 | <strong>Second Author</strong></p>
            </div>
            <div class="publication-item">
              <h3>Nezha-MB: Design and Implementation of a Morphing Hybrid Aerial-Underwater Vehicle</h3>
              <p>IEEE International Conference on Robotics and Automation (ICRA 2025)</p>
              <p>Accepted: January 2025 | <strong>Third Author</strong></p>
            </div>
          </div>
        </section>

        <section id="cv" class="section">
          <div class="section-card">
            <h2>Curriculum Vitae</h2>
            <p>My detailed CV is currently in progress. Please check back later for updates.</p>
            <a href="#" class="cv-button">Download CV (Coming Soon)</a>
          </div>
        </section>

        <section id="photograph" class="section">
          <div class="section-card">
            <h2>Global Footprint</h2>
            <div class="map-container">
              <div id="Map"></div>
            </div>
            
            <!-- ===== North America ===== -->

            <!-- Los Angeles -->
            <div id="losAngeles" class="city-info">
              <div class="city-header">
                <h3>Los Angeles</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="losAngeles-gallery"></div>
            </div>

            <!-- San Francisco -->
            <div id="sanFrancisco" class="city-info">
              <div class="city-header">
                <h3>San Francisco</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="sanFrancisco-gallery"></div>
            </div>

            <!-- New York -->
            <div id="newYork" class="city-info">
              <div class="city-header">
                <h3>New York City</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="newYork-gallery"></div>
            </div>

            <!-- Atlanta -->
            <div id="atlanta" class="city-info">
              <div class="city-header">
                <h3>Atlanta</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="atlanta-gallery"></div>
            </div>


            <!-- ===== Europe ===== -->

            <!-- Stuttgart -->
            <div id="stuttgart" class="city-info">
              <div class="city-header">
                <h3>Stuttgart</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="stuttgart-gallery"></div>
            </div>

            <!-- Amsterdam -->
            <div id="amsterdam" class="city-info">
              <div class="city-header">
                <h3>Amsterdam</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="amsterdam-gallery"></div>
            </div>

            <!-- Cologne -->
            <div id="cologne" class="city-info">
              <div class="city-header">
                <h3>Cologne</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="cologne-gallery"></div>
            </div>

            <!-- Düsseldorf -->
            <div id="dusseldorf" class="city-info">
              <div class="city-header">
                <h3>Düsseldorf</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="dusseldorf-gallery"></div>
            </div>


            <!-- ===== East Asia ===== -->

            <!-- Tokyo -->
            <div id="tokyo" class="city-info">
              <div class="city-header">
                <h3>Tokyo</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="tokyo-gallery"></div>
            </div>

            <!-- Osaka -->
            <div id="osaka" class="city-info">
              <div class="city-header">
                <h3>Osaka</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="osaka-gallery"></div>
            </div>

            <!-- Kyoto -->
            <div id="kyoto" class="city-info">
              <div class="city-header">
                <h3>Kyoto</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="kyoto-gallery"></div>
            </div>

            <!-- Fuji -->
            <div id="fuji" class="city-info">
              <div class="city-header">
                <h3>Fuji</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="fuji-gallery"></div>
            </div>

            <!-- Kamakura -->
            <div id="kamakura" class="city-info">
              <div class="city-header">
                <h3>Kamakura</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="kamakura-gallery"></div>
            </div>

            <!-- Yokohama -->
            <div id="yokohama" class="city-info">
              <div class="city-header">
                <h3>Yokohama</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="yokohama-gallery"></div>
            </div>

            <!-- ===== West Asia ===== -->

            <!-- Dubai -->
            <div id="dubai" class="city-info">
              <div class="city-header">
                <h3>Dubai</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="dubai-gallery"></div>
            </div>


            <!-- ===== China ===== -->

            <!-- Shanghai -->
            <div id="shanghai" class="city-info">
              <div class="city-header">
                <h3>Shanghai</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="shanghai-gallery"></div>
            </div>

            <!-- Beijing -->
            <div id="beijing" class="city-info">
              <div class="city-header">
                <h3>Beijing</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="beijing-gallery"></div>
            </div>

            <!-- Taiwan -->
            <!-- Taipei -->
            <div id="taipei" class="city-info">
              <div class="city-header">
                <h3>Taipei</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="taipei-gallery"></div>
            </div>

            <!-- Kaohsiung -->
            <div id="kaohsiung" class="city-info">
              <div class="city-header">
                <h3>Kaohsiung</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="kaohsiung-gallery"></div>
            </div>

            <!-- Macau -->
            <div id="macau" class="city-info">
              <div class="city-header">
                <h3>Macau</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="macau-gallery"></div>
            </div>

            <!-- Guangdong Province-->
            <!-- Shenzhen -->
            <div id="shenzhen" class="city-info">
              <div class="city-header">
                <h3>Shenzhen</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="shenzhen-gallery"></div>
            </div>

            <!-- Guangzhou -->
            <div id="guangzhou" class="city-info">
              <div class="city-header">
                <h3>Guangzhou</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="guangzhou-gallery"></div>
            </div>

            <!-- Chongqing -->
            <div id="chongqing" class="city-info">
              <div class="city-header">
                <h3>Chongqing</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="chongqing-gallery"></div>
            </div>

            <!-- Hunan Province-->
            <!-- Changsha -->
            <div id="changsha" class="city-info">
              <div class="city-header">
                <h3>Changsha</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="changsha-gallery"></div>
            </div>

            <!-- Zhangjiajie -->
            <div id="zhangjiajie" class="city-info">
              <div class="city-header">
                <h3>Zhangjiajie</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="zhangjiajie-gallery"></div>
            </div>

            <!-- Yueyang -->
            <div id="yueyang" class="city-info">
              <div class="city-header">
                <h3>Yueyang</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="yueyang-gallery"></div>
            </div>

            <!-- Shaoyang -->
            <div id="shaoyang" class="city-info">
              <div class="city-header">
                <h3>Shaoyang</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="shaoyang-gallery"></div>
            </div>

            <!-- Fujian Province-->
            <!-- Xiamen -->
            <div id="xiamen" class="city-info">
              <div class="city-header">
                <h3>Xiamen</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="xiamen-gallery"></div>
            </div>

            <!-- Sichuan Province-->
            <!-- Chengdu -->
            <div id="chengdu" class="city-info">
              <div class="city-header">
                <h3>Chengdu</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="chengdu-gallery"></div>
            </div>

            <!-- Zhejiang Province-->
            <!-- Hangzhou -->
            <div id="hangzhou" class="city-info">
              <div class="city-header">
                <h3>Hangzhou</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="hangzhou-gallery"></div>
            </div>

            <!-- Suzhou -->
            <div id="suzhou" class="city-info">
              <div class="city-header">
                <h3>Suzhou</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="suzhou-gallery"></div>
            </div>

            <!-- Shaanxi Province-->
            <!-- Xi'an -->
            <div id="xian" class="city-info">
              <div class="city-header">
                <h3>Xi'an</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="xian-gallery"></div>
            </div>

            <!-- Shandong Province-->
            <!-- Qingdao -->
            <div id="qingdao" class="city-info">
              <div class="city-header">
                <h3>Qingdao</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="qingdao-gallery"></div>
            </div>

            <!-- Yantai -->
            <div id="yantai" class="city-info">
              <div class="city-header">
                <h3>Yantai</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="yantai-gallery"></div>
            </div>

            <!-- Weihai -->
            <div id="weihai" class="city-info">
              <div class="city-header">
                <h3>Weihai</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="weihai-gallery"></div>
            </div>

            <!-- Taian -->
            <div id="taian" class="city-info">
              <div class="city-header">
                <h3>Taian</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="taian-gallery"></div>
            </div>

            <!-- ===== Current Base ===== -->
            <!-- Hong Kong -->
            <div id="hongKong" class="city-info">
              <div class="city-header">
                <h3>Hong Kong</h3>
              </div>
              <p class="city-description"></p>
              <div class="city-gallery" id="hongKong-gallery"></div>
            </div>

          </div>
        </section>
      </main>
    </div>
  </div>

  <a href="#" class="back-to-top" id="backToTop">
    <i class="fas fa-arrow-up"></i>
  </a>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Existing scripts...

    // Helper function to copy text to clipboard
    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch (err) {
        console.error('Failed to copy: ', err);
        return false;
      }
    }

    // Helper function to show a temporary notification
    function showCopyNotification(element, message) {
      const notification = document.createElement('span');
      notification.textContent = message;
      notification.style.cssText = `
        margin-left: 10px;
        color: green;
        font-size: 0.9em;
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
      `;
      element.parentNode.insertBefore(notification, element.nextSibling);

      setTimeout(() => {
        notification.style.opacity = 0;
        notification.addEventListener('transitionend', () => notification.remove());
      }, 2000); // Show for 2 seconds
    }

    // Function to copy phone number
    async function copyPhoneNumber() {
      const phoneLink = document.getElementById('phoneLink');
      if (!phoneLink) return;
      const phoneNumber = phoneLink.textContent.replace('Tel: ', '').trim();
      const success = await copyToClipboard(phoneNumber);
      if (success) {
        showCopyNotification(phoneLink, 'Copied!');
      }
    }

    // Function to copy email address
    async function copyEmail(email, linkId) {
      const emailLink = document.getElementById(linkId);
      if (!emailLink) return;
      const success = await copyToClipboard(email);
      if (success) {
        showCopyNotification(emailLink, 'Copied!');
      }
    }

    // Back to Top Button
    const backToTopButton = document.getElementById('backToTop');

    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        backToTopButton.classList.add('visible');
      } else {
        backToTopButton.classList.remove('visible');
      }
    });

    backToTopButton.addEventListener('click', (e) => {
      e.preventDefault();
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Smooth scroll for all anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth'
          });
        }
      });
    });

    // Section Navigation
    const sections = document.querySelectorAll('.section');
    const navLinks = document.querySelectorAll('.nav-link');

    function showSection(sectionId) {
      // Hide all sections
      sections.forEach(section => {
        section.classList.remove('active');
      });

      // Remove active class from all nav links
      navLinks.forEach(link => {
        link.classList.remove('active');
      });

      // Show selected section
      const selectedSection = document.getElementById(sectionId);
      if (selectedSection) {
        selectedSection.classList.add('active');
      }

      // Add active class to clicked nav link
      const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
      if (activeLink) {
        activeLink.classList.add('active');
      }
    }

    // Add click event listeners to nav links
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const sectionId = link.getAttribute('data-section');
        showSection(sectionId);
        
        // Update URL hash without scrolling
        history.pushState(null, null, `#${sectionId}`);
      });
    });

    // Handle initial page load
    window.addEventListener('load', () => {
      const hash = window.location.hash.slice(1) || 'home';
      showSection(hash);
    });

    // Handle browser back/forward buttons
    window.addEventListener('popstate', () => {
      const hash = window.location.hash.slice(1) || 'home';
      showSection(hash);
    });

    // Initialize map when photograph section is shown
    let map;
    const cities = {
      // ===== North America =====
      losAngeles: { 
        lat: 34.0522, 
        lng: -118.2437, 
        name: "Los Angeles", 
        date: "2025.05",
        description: "The entertainment capital of the world.",
        timezone: "America/Los_Angeles",
        photos: [
          { src: "pictures/losangeles1.jpg", alt: "Night view of LA on Griffith Observatory" } // change alt for caption text
          // Add more photos by adding new objects here
          // { src: "pictures/losangeles2.jpg", alt: "Los Angeles" }
        ]
      },
      sanFrancisco: { 
        lat: 37.7749, 
        lng: -122.4194, 
        name: "San Francisco", 
        date: "2025.05",
        description: "The tech hub of Silicon Valley.",
        timezone: "America/Los_Angeles",
        photos: [
          { src: "pictures/sanfrancisco1.jpg", alt: "Fog immersed Golden Gate Bridge" }
        ]
      },
      newYork: { 
        lat: 40.7128, 
        lng: -74.0060, 
        name: "New York City", 
        date: "2025.05",
        description: "The city that never sleeps.",
        timezone: "America/New_York",
        photos: [
          { src: "pictures/newyork1.jpg", alt: "The Empire State Building, the Manhattan, the New York" }
        ]
      },
      atlanta: { 
        lat: 33.7490, 
        lng: -84.3880, 
        name: "Atlanta", 
        date: "2025.05",
        description: "The capital of Georgia and a major business hub.",
        timezone: "America/New_York",
        photos: [
          { src: "pictures/atlanta1.jpg", alt: "Atlanta Olympic Rings" }
        ]
      },

      // ===== Europe =====
      stuttgart: { 
        lat: 48.7758, 
        lng: 9.1829, 
        name: "Stuttgart", 
        date: "2024.09",
        description: "The automotive capital of Germany.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "pictures/stuttgart1.jpg", alt: "I was walking on the street" }
        ]
      },
      amsterdam: { 
        lat: 52.3676, 
        lng: 4.9041, 
        name: "Amsterdam", 
        date: "2024.09",
        description: "The capital of the Netherlands.",
        timezone: "Europe/Amsterdam",
        photos: [
          { src: "pictures/amsterdam1.jpg", alt: "Sunset, vibe was chill" }
        ]
      },
      cologne: { 
        lat: 50.9375, 
        lng: 6.9603, 
        name: "Cologne", 
        date: "2024.07",
        description: "A historic city on the Rhine River.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "pictures/cologne1.jpg", alt: "Staring Cologne Cathedral on the balcony of the hotel" }
        ]
      },
      dusseldorf: { 
        lat: 51.2277, 
        lng: 6.7735, 
        name: "Düsseldorf", 
        date: "2024.02",
        description: "A major business and fashion center.",
        timezone: "Europe/Berlin",
        photos: [
          { src: "pictures/dusseldorf1.jpg", alt: "Days short nights long" }
        ]
      },

      // ===== East Asia =====
      tokyo: {
        lat: 35.6796,
        lng: 139.7685,
        name: "Tokyo",
        date: "2024.12",
        description: "Japan's capital and largest city.",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "pictures/tokyo1.jpg", alt: "Finally saw this tower" }
        ]
      },
      osaka: {
        lat: 34.6937,
        lng: 135.5023,
        name: "Osaka",
        date: "2024.12",
        description: "Japan's second-largest city.",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "pictures/osaka1.jpg", alt: "Stone Lion sent by Chinese Government" }
        ]
      },
      kyoto: {
        lat: 35.0109,
        lng: 135.7669,
        name: "Kyoto",
        date: "2024.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "pictures/kyoto1.jpg", alt: "xxx" } //
        ]
      },
      fuji: {
        lat: 35.1614,
        lng: 138.6766,
        name: "Fuji",
        date: "2024.12",
        description: "The iconic symbol of Japan.",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "pictures/fuji1.jpg", alt: "xxx" } //
        ]
      },
      kamakura: {
        lat: 35.3177,
        lng: 139.5508,
        name: "Kamakura",
        date: "2024.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "pictures/kamakura1.jpg", alt: "xxx" } //
        ]
      },
      yokohama: {
        lat: 35.4438,
        lng: 139.6375,
        name: "Yokohama",
        date: "2024.12",
        description: "xxx",
        timezone: "Asia/Tokyo",
        photos: [
          { src: "pictures/yokohama1.jpg", alt: "xxx" } //
        ]
      },

      // ===== West Asia =====
      dubai: { 
        lat: 25.2048, 
        lng: 55.2708, 
        name: "Dubai", 
        date: "2024.02",
        description: "A city of architectural wonders.",
        timezone: "Asia/Dubai",
        photos: [
          { src: "pictures/dubai1.jpg", alt: "Dazzling and impressive in this desert" }
        ]
      },

      // ===== China =====
      // Shanghai Municipality
      shanghai: { 
        lat: 31.23157, 
        lng: 121.48452, 
        name: "Shanghai", 
        date: "2025.03",
        description: "China's largest city and financial center.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/shanghai1.jpg", alt: "Best of Lujiazui" }
        ]
      },
      // Beijing Municipality
      beijing: { 
        lat: 39.90871, 
        lng: 116.39748, 
        name: "Beijing", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/beijing1.jpg", alt: "xxx" } //
        ]
      },
      // Taiwan
      taipei: { 
        lat: 25.03373, 
        lng: 121.56407, 
        name: "Taipei", 
        date: "2025.01",
        description: "The capital city of Taiwan.",
        timezone: "Asia/Taipei",
        photos: [
          { src: "pictures/taipei1.jpg", alt: "101" }
        ]
      },
      kaohsiung: { 
        lat: 22.62791, 
        lng: 120.30123, 
        name: "Kaohsiung", 
        date: "2025.01",
        description: "xxx",
        timezone: "Asia/Taipei",
        photos: [
          { src: "pictures/kaohsiung1.jpg", alt: "xxx" } //
        ]
      },
      // Macau SAR
      macau: { 
        lat: 22.19924, 
        lng: 113.54281, 
        name: "Macau", 
        date: "2025.07",
        description: "Won 500 hkd in the casino.",
        timezone: "Asia/Macau",
        photos: [
          { src: "pictures/macau1.jpg", alt: "You know it" }
        ]
      },
      // Guangdong Province
      shenzhen: { 
        lat: 22.54274, 
        lng: 114.05869, 
        name: "Shenzhen", 
        date: "Go Frequently",
        description: "A major tech and manufacturing hub.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/shenzhen1.jpg", alt: "Sea World" }
        ]
      },
      guangzhou: { 
        lat: 23.10614, 
        lng: 113.32434, 
        name: "Guangzhou", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/guangzhou1.jpg", alt: "xxx" } //
        ]
      },
      // Chongqing Municipality
      chongqing: { 
        lat: 29.55669, 
        lng: 106.57748, 
        name: "Chongqing", 
        date: "2023.12",
        description: "I like the hotpot there.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/chongqing1.jpg", alt: "Even I think Hongya Cave is amazing" }
        ]
      },
      // Hunan Province
      changsha: { 
        lat: 28.19534, 
        lng: 112.97728, 
        name: "Changsha", 
        date: "2025.01",
        description: "My hometown!!!",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/changsha1.jpg", alt: "Autumn-Admiring Pavilion" }
        ]
      },
      zhangjiajie: { 
        lat: 29.11625, 
        lng: 110.47723, 
        name: "Zhangjiajie", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/zhangjiajie1.jpg", alt: "xxx" } //
        ]
      },
      yueyang: { 
        lat: 29.37220, 
        lng: 113.12252, 
        name: "Yueyang", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/yueyang1.jpg", alt: "xxx" } //
        ]
      },
      shaoyang: { 
        lat: 27.23873, 
        lng: 111.46756, 
        name: "Shaoyang", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/shaoyang1.jpg", alt: "xxx" } //
        ]
      },
      // Fujian Province
      xiamen: { 
        lat: 24.47881, 
        lng: 118.08863,
        name: "Xiamen", 
        date: "2023.07",
        description: "Comfortable and beautiful.",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/xiamen1.jpg", alt: "so relaxing, so chilling" }
        ]
      },
      // Sichuan Province
      chengdu: { 
        lat: 30.65855, 
        lng: 104.06601, 
        name: "Chengdu", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/chengdu1.jpg", alt: "xxx" } //
        ]
      },
      // Zhejiang Province
      hangzhou: { 
        lat: 30.27248, 
        lng: 120.15626, 
        name: "Hangzhou", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/hangzhou1.jpg", alt: "xxx" } //
        ]
      },
      suzhou: { 
        lat: 31.29864, 
        lng: 120.58222, 
        name: "Suzhou", 
        date: "202x.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/suzhou1.jpg", alt: "xxx" } //
        ]
      },
      //Shannxi Province
      xian: { 
        lat: 34.26574, 
        lng: 108.95414, 
        name: "Xi'an", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/xian1.jpg", alt: "xxx" } //
        ]
      },
      //Shandong Province
      qingdao: { 
        lat: 36.0671, 
        lng: 120.3826, 
        name: "Qingdao", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/qingdao1.jpg", alt: "xxx" } //
        ]
      },
      yantai: { 
        lat: 37.46191, 
        lng: 121.44703, 
        name: "Yantai", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/yantai1.jpg", alt: "xxx" } //
        ]
      },
      weihai: { 
        lat: 37.51341, 
        lng: 122.12179, 
        name: "Weihai", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/weihai1.jpg", alt: "xxx" } //
        ]
      },
      taian: {
        lat: 36.19962, 
        lng: 117.08926, 
        name: "Taian", 
        date: "20xx.xx",
        description: "xxx",
        timezone: "Asia/Shanghai",
        photos: [
          { src: "pictures/taian1.jpg", alt: "xxx" } //
        ]
      },


      // ===== Current Base =====
      // Hong Kong SAR
      hongKong: { 
        lat: 22.29481, 
        lng: 114.17341, 
        name: "Hong Kong", 
        date: "Current Base",
        description: "The vibrant city where I currently live and study, combining modern architecture with rich cultural heritage.",
        timezone: "Asia/Hong_Kong",
        photos: [
          { src: "pictures/hongkong1.jpg", alt: "From the roof of my home" }
        ]
      }
    };

    // Function to update city times
    function updateCityTimes() {
      Object.entries(cities).forEach(([id, city]) => {
        const timeElement = document.getElementById(`${id}-time`);
        if (timeElement) {
          const time = new Date().toLocaleTimeString('en-US', {
            timeZone: city.timezone,
            hour12: true,
            hour: 'numeric',
            minute: '2-digit'
          });
          timeElement.textContent = `Current Time: ${time}`;
        }
      });
    }

    function initMap() {
      if (map) return;

      // Initialize map with custom options
      map = L.map('Map', {
        center: [0, 0],
        zoom: 2,
        zoomControl: false,
        scrollWheelZoom: true,
        minZoom: 1,
        maxZoom: 18,
        zoomSnap: 0.5,
        zoomDelta: 0.5,
        wheelDebounceTime: 40,
        wheelPxPerZoomLevel: 60,
        worldCopyJump: true,
        maxBounds: null,
        maxBoundsViscosity: 0
      });

      // Add your preferred tile layer here (no change)
      const dayLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '©OpenStreetMap, ©CartoDB',
        maxZoom: 19,
        noWrap: false,
        continuousWorld: true
      });
      dayLayer.addTo(map);

      // Add zoom control in bottom right with custom styling
      L.control.zoom({
        position: 'bottomright',
        zoomInText: '<i class="fas fa-plus"></i>',
        zoomOutText: '<i class="fas fa-minus"></i>'
      }).addTo(map);

      // --- Add city markers and popups (ensure this runs after terminator) ---
      Object.entries(cities).forEach(([id, city]) => {
        const marker = L.circleMarker([city.lat, city.lng], {
          radius: 8,
          fillColor: getComputedStyle(document.documentElement).getPropertyValue('--secondary-color').trim() || '#3498db',
          color: '#fff',
          weight: 2,
          opacity: 1,
          fillOpacity: 0.8
        }).addTo(map); // Do NOT specify a pane here

        marker.bindPopup(`
          <div class="map-popup">
            <h3>${city.name}</h3>
            <p>Last visited: ${city.date}</p>
            <div class="city-time">Current Time: ${new Date().toLocaleTimeString('en-US', {
              timeZone: city.timezone,
              hour12: true,
              hour: 'numeric',
              minute: '2-digit'
            })}</div>
          </div>
        `, {
          className: 'custom-popup',
          closeButton: false,
          offset: [0, -10]
        });

        // Optional: Add hover effect
        marker.on('mouseover', function() {
          this.setStyle({
            radius: 10,
            fillOpacity: 1
          });
        });
        marker.on('mouseout', function() {
          this.setStyle({
            radius: 8,
            fillOpacity: 0.8
          });
        });

        // Optional: Store marker for later use (e.g., updating popup time)
        if (!map.markers) map.markers = {};
        map.markers[id] = marker;

        // Add click event to show city info section and fly to location
        marker.on('click', () => {
          showCityInfo(id);
          // Optional: Smooth zoom animation on click
          map.flyTo([city.lat, city.lng], Math.max(map.getZoom(), 10), {
            duration: 1.5,
            easeLinearity: 0.25,
            maxZoom: 18
          });
        });
      });
      // --- End marker code ---

      // Add double click zoom handler
      map.on('dblclick', function(e) {
        const newZoom = Math.min(map.getZoom() + 1, 18);
        map.flyTo(e.latlng, newZoom, {
          duration: 0.8,
          easeLinearity: 0.25
        });
      });

      // Add keyboard navigation
      map.on('keydown', function(e) {
        if (e.key === '+') {
          const newZoom = Math.min(map.getZoom() + 1, 18);
          map.flyTo(map.getCenter(), newZoom, {
            duration: 0.5,
            easeLinearity: 0.25
          });
        } else if (e.key === '-') {
          const newZoom = Math.max(map.getZoom() - 1, 2);
          map.flyTo(map.getCenter(), newZoom, {
            duration: 0.5,
            easeLinearity: 0.25
          });
        }
      });

      // Initialize terminator and time updates
      updateCityTimes();
      setInterval(updateCityTimes, 1000); // Update times every second
    }

    // Update showCityInfo function to handle photos and add click listeners
    function showCityInfo(cityId) {
      document.querySelectorAll('.city-info').forEach(info => {
        info.classList.remove('active');
      });

      const cityInfo = document.getElementById(cityId);
      if (cityInfo) {
        // Update description from JavaScript data
        const description = cityInfo.querySelector('.city-description');
        if (description && cities[cityId]) {
          description.textContent = cities[cityId].description;
        }

        // Update photos from JavaScript data
        const gallery = cityInfo.querySelector('.city-gallery');
        if (gallery && cities[cityId].photos) {
          gallery.innerHTML = cities[cityId].photos.map(photo => 
            `<img src="${photo.src}" alt="${photo.alt}" class="gallery-image">`
          ).join('');

          // Add click listeners to the newly added images
          const images = gallery.querySelectorAll('.gallery-image');
          images.forEach(img => {
            img.addEventListener('click', function() {
              const modal = document.getElementById("photoModal");
              const modalImg = document.getElementById("modalImage");
              const captionText = document.getElementById("caption");
              if (modal && modalImg && captionText) {
                console.log('Opening modal');
                modal.style.display = "block";
                modalImg.src = this.src;
                captionText.innerHTML = this.alt;
              }
            });
          });
        }
        
        cityInfo.classList.add('active');
        cityInfo.scrollIntoView({ 
          behavior: 'smooth',
          block: 'start'
        });
      }
    }

    // Function to update popup times
    function updatePopupTimes() {
      Object.entries(cities).forEach(([id, city]) => {
        const marker = map.markers?.[id];
        if (marker) {
          const time = new Date().toLocaleTimeString('en-US', {
            timeZone: city.timezone,
            hour12: true,
            hour: 'numeric',
            minute: '2-digit'
          });
          marker.setPopupContent(`
            <div class="map-popup">
              <h3>${city.name}</h3>
              <p>Last visited: ${city.date}</p>
              <div class="city-time">Current Time: ${time}</div>
            </div>
          `);
        }
      });
    }

    // Initialize map when photograph section is shown
    document.querySelector('[data-section="photograph"]').addEventListener('click', () => {
      setTimeout(() => {
        initMap();
        // Update popup times every minute
        setInterval(updatePopupTimes, 60000);
      }, 100);
    });

    // Initialize descriptions and photos with click listeners when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      Object.entries(cities).forEach(([id, city]) => {
        // Update description
        const description = document.querySelector(`#${id} .city-description`);
        if (description) {
          description.textContent = city.description;
        }

        // Update photos
        const gallery = document.querySelector(`#${id}-gallery`);
        if (gallery && city.photos) {
          gallery.innerHTML = city.photos.map(photo => 
            `<img src="${photo.src}" alt="${photo.alt}" class="gallery-image">`
          ).join('');

          const images = gallery.querySelectorAll('.gallery-image');
          images.forEach(img => {
            img.addEventListener('click', function() {
              const modal = document.getElementById("photoModal");
              const modalImg = document.getElementById("modalImage");
              const captionText = document.getElementById("caption");
              if (modal && modalImg && captionText) {
                console.log('Opening modal');
                modal.style.display = "block";
                modalImg.src = this.src;
                captionText.innerHTML = this.alt;
              }
            });
          });
        }
      });

      // Get the modal element
      const modal = document.getElementById("photoModal");
      const modalImg = document.getElementById("modalImage");
      const caption = document.getElementById("caption");
      const closeBtn = document.getElementById("closeModalBtn");

      if (modal) {
        // Clicking the overlay closes the modal
        modal.addEventListener('click', function(event) {
          // Only close if the click is directly on the modal (not on children)
          if (event.target === modal) {
            console.log('Overlay clicked, closing modal');
            modal.style.display = "none";
          }
        });
      }
      if (modalImg) {
        modalImg.addEventListener('click', function(event) {
          event.stopPropagation();
        });
      }
      if (caption) {
        caption.addEventListener('click', function(event) {
          event.stopPropagation();
        });
      }
      if (closeBtn) {
        closeBtn.addEventListener('click', function(event) {
          console.log('Close button clicked');
          if (modal) {
            console.log('Setting modal display to none');
            modal.style.display = "none";
          }
          event.stopPropagation();
        });
      }
    });
  </script>

  <!-- Photo Modal -->
  <div id="photoModal" class="modal">
    <span id="closeModalBtn" style="position:absolute;top:20px;right:35px;font-size:40px;font-weight:bold;color:#fff;cursor:pointer;z-index:2100;">&times;</span>
    <img class="modal-content" id="modalImage">
    <div id="caption"></div>
  </div>
</body>
</html>